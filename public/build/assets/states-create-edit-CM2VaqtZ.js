import{L as j}from"./index-CUO78Va1.js";import{T as F,r as i,o as a,c as l,a as n,g as k,w as t,F as c,b as d,t as m,d as N,e as u,f as h,i as O}from"./app-BXgbEd8A.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_user-menu-ENtOGCbS.js";const B={name:"StatesCreateEdit",layout:j,props:{documentTypes:{type:Object,required:!1,defualt:()=>{}},state:{type:Object,required:!1,default:()=>{}}},data(){return{form:F({name:"",document_type_ids:[]})}},watch:{state:{handler(s){!s||!s.data||(this.form.name=s.data.name,this.form.document_type_ids=s.data.document_types.map(r=>r.document_type_id))},immediate:!0}},methods:{submitForm(){this.form.clearErrors(),this.state&&this.state.data&&this.state.data.state_id?this.updateRequest():this.storeRequest()},storeRequest(){this.form.post(this.route("panel.admin.states.store"),{onSuccess:()=>this.$toast().success("State created successfully!"),onError:s=>{Object.keys(s).forEach(r=>{const o=s[r];this.$toast().error(o)})}})},updateRequest(){this.form.patch(this.route("panel.admin.states.update",{state:this.state.data.state_id}),{onSuccess:()=>this.$toast().success("State updated successfully!"),onError:s=>{Object.keys(s).forEach(r=>{const o=s[r];this.$toast().error(o)})}})},deleteRequest(){this.$alert().confirm(()=>new Promise((s,r)=>{this.form.delete(this.route("panel.admin.states.destroy",{state:this.state.data.id}),{onSuccess:()=>{this.$toast().success("State deleted successfully!"),s()},onError:o=>{Object.keys(o).forEach(y=>{const e=o[y];this.$toast().error(e)}),r()}})}))}}},L={class:"h-full flex flex-col"},D={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"},U=["value"];function M(s,r,o,y,e,x){const S=i("v-inertia-head"),E=i("v-section-heading"),b=i("v-content-body"),g=i("v-form-label"),C=i("v-form-input"),v=i("v-form-error"),_=i("v-form-group"),V=i("v-form-checkbox"),p=i("v-button"),w=i("v-form");return a(),l(c,null,[n(S,{title:o.state?`Editing '${o.state.data.name}' state.`:"Create State"},null,8,["title"]),k("div",L,[n(b,{class:"border-b border-gray-200"},{default:t(()=>[n(E,null,{title:t(()=>[o.state?(a(),l(c,{key:1},[d(" Editing '"+m(o.state.data.name)+"' state. ",1)],64)):(a(),l(c,{key:0},[d(" Create State ")],64))]),description:t(()=>[o.state?(a(),l(c,{key:1},[d(" Change and/or modify the details for the state. ")],64)):(a(),l(c,{key:0},[d(" Fill up the form below to create a new state for the application. ")],64))]),_:1})]),_:1}),n(b,null,{default:t(()=>[n(w,{class:"space-y-6",onSubmit:N(x.submitForm,["prevent"])},{default:t(()=>[n(_,null,{default:t(()=>[n(g,null,{default:t(()=>[d("Name")]),_:1}),n(C,{type:"text",modelValue:e.form.name,"onUpdate:modelValue":r[0]||(r[0]=f=>e.form.name=f),error:e.form.errors.name,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.name?(a(),u(v,{key:0},{default:t(()=>[d(m(e.form.errors.name),1)]),_:1})):h("",!0)]),_:1}),n(_,null,{default:t(()=>[n(g,null,{default:t(()=>[d("Document Types")]),_:1}),k("div",D,[(a(!0),l(c,null,O(o.documentTypes.data,(f,q)=>(a(),u(V,{key:"documentType_"+q,modelValue:e.form.document_type_ids,"onUpdate:modelValue":r[1]||(r[1]=T=>e.form.document_type_ids=T),value:f.document_type_id,disabled:e.form.processing},{default:t(()=>[d(m(f.name),1)]),_:2},1032,["modelValue","value","disabled"]))),128))]),e.form.errors.documentType_ids?(a(),u(v,{key:0},{default:t(()=>[d(m(e.form.errors.documentType_ids),1)]),_:1})):h("",!0)]),_:1}),n(_,{class:"flex items-center justify-end gap-2 text-right border-t border-gray-200 py-6"},{default:t(()=>[e.form.progress?(a(),l("progress",{key:0,value:e.form.progress.percentage,max:"100"},m(e.form.progress.percentage)+"% ",9,U)):h("",!0),n(p,{href:s.route("panel.admin.states.index"),color:"white",disabled:e.form.processing},{default:t(()=>[d(" Cancel ")]),_:1},8,["href","disabled"]),o.state?(a(),u(p,{key:2,disabled:e.form.processing},{default:t(()=>[d(" Save Changes ")]),_:1},8,["disabled"])):(a(),u(p,{key:1,disabled:e.form.processing},{default:t(()=>[d(" Create State ")]),_:1},8,["disabled"]))]),_:1})]),_:1},8,["onSubmit"])]),_:1})])],64)}const H=R(B,[["render",M]]);export{H as default};
