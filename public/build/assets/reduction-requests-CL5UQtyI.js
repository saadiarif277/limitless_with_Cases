import{L as A}from"./index-C99Ts5PX.js";import{o as n,c as i,g as e,t as d,f as c,F as $,i as S,d as U,l as r,B as D,q as V,p as C,k as N}from"./app-BXgbEd8A.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_user-menu-ENtOGCbS.js";const I={name:"ReductionRequests",layout:A,props:{reductionRequests:{type:Array,required:!0,default:()=>[]}},data(){return{}},methods:{formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"},async submitDecision(t){if(!t.decision){this.$toast().error("Please select a decision");return}t.processing=!0;try{if((await this.$inertia.put(route("panel.user.referrals.update-reduction-decision",t.id),{doctor_decision:t.decision,counter_offer:t.counter_offer||null,notes:t.notes||null})).status===200){this.$toast().success("Decision submitted successfully");const l=this.reductionRequests.findIndex(_=>_.id===t.id);l>-1&&this.reductionRequests.splice(l,1)}}catch(u){this.$toast().error("Error submitting decision. Please try again."),console.error("Error:",u)}finally{t.processing=!1}},resetForm(t){t.decision=null,t.counter_offer=null,t.notes=""}},mounted(){this.reductionRequests.forEach(t=>{t.decision=null,t.counter_offer=null,t.notes="",t.processing=!1})}},o=t=>(C("data-v-47c77a3d"),t=t(),N(),t),B={class:"h-full space-y-6"},z=o(()=>e("div",{class:"bg-white shadow-sm rounded-lg p-6"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-semibold text-gray-900"},"Reduction Requests"),e("p",{class:"mt-1 text-sm text-gray-600"}," Review and respond to reduction requests from attorneys ")])])],-1)),L={class:"bg-white shadow-sm rounded-lg p-6"},M={key:0,class:"mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded relative",role:"alert"},P={class:"block sm:inline"},E={key:1,class:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert"},F={class:"block sm:inline"},H={key:2,class:"text-center py-12"},O=o(()=>e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),Y=o(()=>e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No pending reduction requests",-1)),T=o(()=>e("p",{class:"mt-1 text-sm text-gray-500"}," You don't have any pending reduction requests at the moment. ",-1)),G=[O,Y,T],J={key:3,class:"space-y-6"},K={class:"px-6 py-4"},Q={class:"flex items-center justify-between mb-4"},W={class:"text-lg font-medium text-gray-900"},X={class:"text-sm text-gray-500"},Z=o(()=>e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"}," Pending Response ",-1)),q={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},ee=o(()=>e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Case Information",-1)),te={class:"space-y-2 text-sm text-gray-600"},se=o(()=>e("span",{class:"font-medium"},"Case ID:",-1)),oe={class:"ml-2"},ne=o(()=>e("span",{class:"font-medium"},"Patient:",-1)),ie={class:"ml-2"},ae=o(()=>e("span",{class:"font-medium"},"Attorney:",-1)),de={class:"ml-2"},le=o(()=>e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Reduction Details",-1)),ce={class:"space-y-2 text-sm text-gray-600"},re=o(()=>e("span",{class:"font-medium"},"Requested Amount:",-1)),ue={class:"ml-2 text-lg font-semibold text-red-600"},me=o(()=>e("span",{class:"font-medium"},"Referral Status:",-1)),_e={class:"ml-2 capitalize"},pe={key:0,class:"mb-6"},he=o(()=>e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Supporting Documents",-1)),fe={class:"flex items-center space-x-2"},ge=o(()=>e("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})],-1)),be=["href"],xe={class:"border-t border-gray-200 pt-6"},ye=o(()=>e("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Your Response",-1)),ve=["onSubmit"],we=o(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Decision * ",-1)),ke={class:"space-y-2"},Re={class:"flex items-center"},De=["onUpdate:modelValue"],Ve=o(()=>e("span",{class:"ml-2 text-sm text-gray-700"},"Accept Reduction",-1)),Ae={class:"flex items-center"},$e=["onUpdate:modelValue"],Se=o(()=>e("span",{class:"ml-2 text-sm text-gray-700"},"Reject Reduction",-1)),Ue={key:0},Ce=o(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Counter Offer (Optional) ",-1)),Ne={class:"relative"},je=o(()=>e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),Ie=["onUpdate:modelValue"],Be=o(()=>e("p",{class:"mt-1 text-xs text-gray-500"}," Suggest an alternative amount if you'd like to negotiate ",-1)),ze=o(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Additional Notes (Optional) ",-1)),Le=["onUpdate:modelValue"],Me={class:"flex justify-end space-x-3"},Pe=["onClick"],Ee=["disabled"],Fe={key:0},He={key:1};function Oe(t,u,l,_,Ye,m){var p,h,f,g,b,x;return n(),i("div",B,[z,e("div",L,[(f=(h=(p=t.$page)==null?void 0:p.props)==null?void 0:h.flash)!=null&&f.success?(n(),i("div",M,[e("span",P,d(t.$page.props.flash.success),1)])):c("",!0),(x=(b=(g=t.$page)==null?void 0:g.props)==null?void 0:b.flash)!=null&&x.error?(n(),i("div",E,[e("span",F,d(t.$page.props.flash.error),1)])):c("",!0),l.reductionRequests.length===0?(n(),i("div",H,G)):(n(),i("div",J,[(n(!0),i($,null,S(l.reductionRequests,s=>{var y,v,w,k,R;return n(),i("div",{key:s.id,class:"bg-white shadow rounded-lg border border-gray-200"},[e("div",K,[e("div",Q,[e("div",null,[e("h3",W," Reduction Request #"+d(s.id),1),e("p",X," Requested on "+d(m.formatDate(s.created_at)),1)]),Z]),e("div",q,[e("div",null,[ee,e("div",te,[e("div",null,[se,e("span",oe,d(((y=s.case)==null?void 0:y.case_id)||"N/A"),1)]),e("div",null,[ne,e("span",ie,d(((w=(v=s.referral)==null?void 0:v.patientUser)==null?void 0:w.name)||"N/A"),1)]),e("div",null,[ae,e("span",de,d(((R=(k=s.referral)==null?void 0:k.attorneyUser)==null?void 0:R.name)||"N/A"),1)])])]),e("div",null,[le,e("div",ce,[e("div",null,[re,e("span",ue,"$"+d(s.amount),1)]),e("div",null,[me,e("span",_e,d(s.referral_status),1)])])])]),s.file_path?(n(),i("div",pe,[he,e("div",fe,[ge,e("a",{href:`/storage/${s.file_path}`,target:"_blank",class:"text-blue-600 hover:text-blue-800 text-sm"}," View Document ",8,be)])])):c("",!0),e("div",xe,[ye,e("form",{onSubmit:U(a=>m.submitDecision(s),["prevent"]),class:"space-y-4"},[e("div",null,[we,e("div",ke,[e("label",Re,[r(e("input",{type:"radio","onUpdate:modelValue":a=>s.decision=a,value:"accepted",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,De),[[D,s.decision]]),Ve]),e("label",Ae,[r(e("input",{type:"radio","onUpdate:modelValue":a=>s.decision=a,value:"rejected",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,$e),[[D,s.decision]]),Se])])]),s.decision==="rejected"?(n(),i("div",Ue,[Ce,e("div",Ne,[je,r(e("input",{type:"number","onUpdate:modelValue":a=>s.counter_offer=a,step:"0.01",min:"0",class:"pl-7 block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"0.00"},null,8,Ie),[[V,s.counter_offer]])]),Be])):c("",!0),e("div",null,[ze,r(e("textarea",{"onUpdate:modelValue":a=>s.notes=a,rows:"3",class:"block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Add any additional comments or explanations..."},null,8,Le),[[V,s.notes]])]),e("div",Me,[e("button",{type:"button",onClick:a=>m.resetForm(s),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset ",8,Pe),e("button",{type:"submit",disabled:!s.decision||s.processing,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[s.processing?(n(),i("span",Fe,"Processing...")):(n(),i("span",He,"Submit Decision"))],8,Ee)])],40,ve)])])])}),128))]))])])}const Qe=j(I,[["render",Oe],["__scopeId","data-v-47c77a3d"]]);export{Qe as default};
