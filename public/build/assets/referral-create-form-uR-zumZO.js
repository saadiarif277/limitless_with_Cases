import{R as M,a as A,b as B}from"./_referral-patient-form-DlZeX9sM.js";import{r as l,o as n,c as b,a as r,w as t,g as d,f as u,F as q,i as I,b as a,t as m,e as _,d as U,T as L}from"./app-Bi_K_mTy.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={props:{attorneys:{type:Object,required:!0,default:()=>{}},doctors:{type:Object,required:!0,default:()=>{}},documentCategories:{type:Object,required:!0,default:()=>{}},form:{type:Object,required:!0,default:()=>{}},patients:{type:Object,required:!0,default:()=>{}},referralReasons:{type:Object,required:!1,default:()=>{}},states:{type:Object,required:!1,default:()=>{}}}},T={class:"divide-y divide-gray-200"},z={class:"flex items-center gap-2"},E=d("div",{class:"flex items-center gap-2"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-pink-500"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),d("span",{class:"text-pink-500"},"Document"),a(" Information ")],-1),H={key:0,class:"text-red-500 font-medium italic"},W={class:"relative grid grid-cols-1 gap-4"},Y={key:0,class:"w-full h-full absolute bg-white opacity-50"},G={key:0,class:"space-y-1"},J={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},K=d("span",{class:"text-red-500 uppercase"}," Cancel ",-1);function Q(p,s,o,j,e,v){const h=l("v-section-heading"),x=l("v-content-body"),f=l("v-link"),y=l("v-form-label"),g=l("v-form-file"),C=l("v-form-group"),w=l("v-card");return n(),b("div",T,[r(x,null,{default:t(()=>[r(h,null,{title:t(()=>[d("div",z,[E,o.form.state_id?u("",!0):(n(),b("div",H," Please select a referral state. "))])]),_:1})]),_:1}),r(x,null,{default:t(()=>[d("div",W,[o.form.state_id?u("",!0):(n(),b("div",Y)),(n(!0),b(q,null,I(o.documentCategories.data,(c,S)=>(n(),b(q,{key:"documentCategory_"+S},[c.document_types&&c.document_types.length?(n(),b("div",G,[r(h,null,{title:t(()=>[a(m(c.name),1)]),_:2},1024),d("div",J,[(n(!0),b(q,null,I(c.document_types,(V,R)=>(n(),_(w,{key:"documentType_"+R},{default:t(()=>[r(x,null,{default:t(()=>[r(C,null,{default:t(()=>[r(y,{class:"flex items-center justify-between"},{default:t(()=>[a(m(V.name)+" ",1),o.form.documents[V.document_type_id]?(n(),_(f,{key:0,href:"#",onClick:U(O=>o.form.documents[V.document_type_id]=null,["stop"])},{default:t(()=>[K]),_:2},1032,["onClick"])):u("",!0)]),_:2},1024),r(g,{modelValue:o.form.documents[V.document_type_id],"onUpdate:modelValue":O=>o.form.documents[V.document_type_id]=O},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])])):u("",!0)],64))),128))])]),_:1})])}const X=P(N,[["render",Q]]),Z={props:{items:{type:Array,default:()=>[]}},data(){return{form:{policy_limit:"",pip:"",defendant_insurance:"",plaintiff_insurance:"",commercial_case:!1,type_of_accident:"",errors:{},processing:!1},typeOfAccidentOptions:[{label:"Motor Vehicle Accident",value:"motor_vehicle"},{label:"Workplace Accident",value:"workplace"},{label:"Medical Malpractice",value:"medical_malpractice"},{label:"Slip and Fall",value:"slip_and_fall"}]}},methods:{filterItems(){this.items.filter(p=>p.someCondition)},updateParent(){this.$emit("update:insuranceData",{...this.form})},submitForm(){this.form.processing=!0,setTimeout(()=>{this.form.processing=!1,alert("Form submitted!")},2e3)}}},$={class:"divide-y divide-gray-200"},ee=d("div",{class:"flex items-center gap-2"},[d("div",{class:"flex items-center gap-2"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),d("span",{class:"text-dark-500"},"Insurance"),a(" Information ")])],-1),re=d("span",{class:"text-dark-500 italic"},"Policy Limit",-1),te=d("span",{class:"text-dark-500 italic"},"PIP",-1),oe=d("span",{class:"text-dark-500 italic"},"Defendant Insurance",-1),se=d("span",{class:"text-dark-500 italic"},"Plaintiff Insurance",-1),le=d("span",{class:"text-dark-500 italic"},"Type of Accident",-1);function ne(p,s,o,j,e,v){const h=l("v-section-heading"),x=l("v-content-body"),f=l("v-form-label"),y=l("v-form-input"),g=l("v-form-error"),C=l("v-form-group"),w=l("v-form-select");return n(),b("div",$,[r(x,null,{default:t(()=>[r(h,null,{title:t(()=>[ee]),_:1})]),_:1}),r(x,{class:"relative grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-6 gap-4"},{default:t(()=>[r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:t(()=>[r(f,null,{default:t(()=>[re]),_:1}),r(y,{type:"number",modelValue:e.form.policy_limit,"onUpdate:modelValue":s[0]||(s[0]=c=>e.form.policy_limit=c),error:e.form.errors.policy_limit,onInput:v.updateParent,class:"border border-gray-300 rounded-lg"},null,8,["modelValue","error","onInput"]),e.form.errors.policy_limit?(n(),_(g,{key:0},{default:t(()=>[a(m(e.form.errors.policy_limit),1)]),_:1})):u("",!0)]),_:1}),r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:t(()=>[r(f,null,{default:t(()=>[te]),_:1}),r(y,{type:"number",modelValue:e.form.pip,"onUpdate:modelValue":s[1]||(s[1]=c=>e.form.pip=c),error:e.form.errors.pip,onInput:v.updateParent,class:"border border-gray-300 rounded-lg"},null,8,["modelValue","error","onInput"]),e.form.errors.pip?(n(),_(g,{key:0},{default:t(()=>[a(m(e.form.errors.pip),1)]),_:1})):u("",!0)]),_:1}),r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:t(()=>[r(f,null,{default:t(()=>[oe]),_:1}),r(y,{type:"text",modelValue:e.form.defendant_insurance,"onUpdate:modelValue":s[2]||(s[2]=c=>e.form.defendant_insurance=c),error:e.form.errors.defendant_insurance,onInput:v.updateParent,class:"border border-gray-300 rounded-lg"},null,8,["modelValue","error","onInput"]),e.form.errors.defendant_insurance?(n(),_(g,{key:0},{default:t(()=>[a(m(e.form.errors.defendant_insurance),1)]),_:1})):u("",!0)]),_:1}),r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:t(()=>[r(f,null,{default:t(()=>[se]),_:1}),r(y,{type:"text",modelValue:e.form.plaintiff_insurance,"onUpdate:modelValue":s[3]||(s[3]=c=>e.form.plaintiff_insurance=c),error:e.form.errors.plaintiff_insurance,onInput:v.updateParent,class:"border border-gray-300 rounded-lg"},null,8,["modelValue","error","onInput"]),e.form.errors.plaintiff_insurance?(n(),_(g,{key:0},{default:t(()=>[a(m(e.form.errors.plaintiff_insurance),1)]),_:1})):u("",!0)]),_:1}),r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:t(()=>[r(f,null,{default:t(()=>[a("Is it a Commercial Case?")]),_:1}),r(w,{options:[{label:"Yes",value:!0},{label:"No",value:!1}],error:e.form.errors.commercial_case,disabled:e.form.processing,required:!0,modelValue:e.form.commercial_case,"onUpdate:modelValue":s[4]||(s[4]=c=>e.form.commercial_case=c)},null,8,["error","disabled","modelValue"]),e.form.errors.commercial_case?(n(),_(g,{key:0},{default:t(()=>[a(m(e.form.errors.commercial_case),1)]),_:1})):u("",!0)]),_:1}),r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:t(()=>[r(f,null,{default:t(()=>[le]),_:1}),r(w,{options:e.typeOfAccidentOptions,modelValue:e.form.type_of_accident,"onUpdate:modelValue":s[5]||(s[5]=c=>e.form.type_of_accident=c),error:e.form.errors.type_of_accident,onChange:v.updateParent,class:"border border-gray-300 rounded-lg"},null,8,["options","modelValue","error","onChange"]),e.form.errors.type_of_accident?(n(),_(g,{key:0},{default:t(()=>[a(m(e.form.errors.type_of_accident),1)]),_:1})):u("",!0)]),_:1})]),_:1})])}const ae=P(Z,[["render",ne]]),ie={name:"ReferralsCreateForm",components:{"x-referral-attorney-form":M,"x-referral-doctor-form":A,"x-referral-documents-form":X,"x-referral-patient-form":B,"x-policy-form":ae},props:{attorneys:{type:Object,required:!0},doctors:{type:Object,required:!0},physicians:{type:Object,required:!0},documentCategories:{type:Object,required:!1},medicalSpecialties:{type:Object,required:!0},patients:{type:Object,required:!0},referralReasons:{type:Object,required:!1},referralStatuses:{type:Object,required:!1},referralStates:{type:Object,required:!1},states:{type:Object,required:!1},listRoute:{type:String,default:"panel.admin.referrals.index"},storeRoute:{type:String,default:"panel.admin.referrals.store"},icdCodes:{type:Object,required:!1},CptCodes:{type:Object,required:!1}},data(){return{form:L({referral_date:new Date().toISOString().split("T")[0],referral_status_id:1,state_id:this.$page.props.auth.user.state_id||"",attorney:{name:"",email:"",phone_number:"",law_firm:{name:"",email:"",phone_number:"",address_line_1:"",address_line_2:"",city:"",state_id:"",zip_code:""}},doctor:{user_id:"",name:"",email:"",phone_number:"",clinic:{clinic_id:"",name:"",email:"",phone_number:"",address_line_1:"",address_line_2:"",city:"",state_id:"",zip_code:""},notes:""},patient:{name:"",email:"",phone_number:"",height:"",weight:"",gender:"",birthdate:"",injury_date:"",address_line_1:"",address_line_2:"",city:"",state_id:"",zip_code:"",referral_reason_ids:[]},documents:{},selectedCptCodes:[],insuranceData:{},billing_type:"",is_cms1500_generated:!1,case_won:!1,outcome:"",reduction_accepted:!1,is_closed:!1,closed_at:null,created_at:null,updated_at:null})}},methods:{handleInsuranceData(p){this.form.insuranceData=p},handleCloseChange(){this.form.is_closed?this.form.closed_at=new Date().toISOString():this.form.closed_at=null},submitForm(){this.form.post(this.route(this.storeRoute),{onSuccess:()=>this.$toast().success("Referral created successfully!"),onError:p=>{Object.keys(p).forEach(s=>{this.$toast().error(p[s])})}})},getCptLabel(p){var o;const s=(((o=this.CptCodes)==null?void 0:o.data)??[]).find(j=>j.id===p);return s?`${s.code} - ${s.description}`:"Unknown"},removeCptCode(p){this.form.selectedCptCodes=this.form.selectedCptCodes.filter(s=>s!==p)}}},de={class:"h-full divide-y divide-gray-200 space-y-12"},ce={key:0,class:"selected-codes"},ue=["onClick"],me=["value"];function fe(p,s,o,j,e,v){const h=l("v-form-label"),x=l("v-form-input"),f=l("v-form-error"),y=l("v-form-group"),g=l("v-form-select"),C=l("v-content-body"),w=l("x-policy-form"),c=l("x-referral-doctor-form"),S=l("x-referral-patient-form"),V=l("x-referral-attorney-form"),R=l("x-referral-documents-form"),O=l("v-button"),D=l("v-form");return n(),_(D,{class:"h-full",onSubmit:U(v.submitForm,["prevent"])},{default:t(()=>[d("div",de,[d("div",null,[r(C,{class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6"},{default:t(()=>[r(y,null,{default:t(()=>[r(h,null,{default:t(()=>[a("Referral Date")]),_:1}),r(x,{type:"date",modelValue:e.form.referral_date,"onUpdate:modelValue":s[0]||(s[0]=i=>e.form.referral_date=i),error:e.form.errors.referral_date,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.referral_date?(n(),_(f,{key:0},{default:t(()=>[a(m(e.form.errors.referral_date),1)]),_:1})):u("",!0)]),_:1}),r(y,null,{default:t(()=>[r(h,null,{default:t(()=>[a("Referral Status")]),_:1}),r(g,{options:o.referralStatuses.data.map(i=>({label:i.name,value:i.referral_status_id})),error:e.form.errors.referral_status_id,disabled:e.form.processing,required:!0,modelValue:e.form.referral_status_id,"onUpdate:modelValue":s[1]||(s[1]=i=>e.form.referral_status_id=i)},null,8,["options","error","disabled","modelValue"]),e.form.errors.referral_status_id?(n(),_(f,{key:0},{default:t(()=>[a(m(e.form.errors.referral_status_id),1)]),_:1})):u("",!0)]),_:1}),r(y,null,{default:t(()=>[r(h,null,{default:t(()=>[a("Referral State")]),_:1}),r(g,{options:(o.referralStates||o.states).data.map(i=>({label:i.name,value:i.state_id})),error:e.form.errors.state_id,disabled:e.form.processing,required:!0,modelValue:e.form.state_id,"onUpdate:modelValue":s[2]||(s[2]=i=>e.form.state_id=i)},null,8,["options","error","disabled","modelValue"]),e.form.errors.state_id?(n(),_(f,{key:0},{default:t(()=>[a(m(e.form.errors.state_id),1)]),_:1})):u("",!0)]),_:1}),r(y,null,{default:t(()=>{var i;return[r(h,null,{default:t(()=>[a("CPT Codes")]),_:1}),r(g,{options:(((i=o.CptCodes)==null?void 0:i.data)??[]).map(k=>({label:k.code+" - "+k.description,value:k.id})),error:e.form.errors.cpt_code_id,disabled:e.form.processing,required:!0,multiple:"",modelValue:e.form.selectedCptCodes,"onUpdate:modelValue":s[3]||(s[3]=k=>e.form.selectedCptCodes=k)},null,8,["options","error","disabled","modelValue"]),e.form.selectedCptCodes.length?(n(),b("div",ce,[(n(!0),b(q,null,I(e.form.selectedCptCodes,(k,F)=>(n(),b("span",{key:F,class:"badge"},[a(m(v.getCptLabel(k))+" ",1),d("button",{type:"button",onClick:_e=>v.removeCptCode(k),class:"remove-btn"},"×",8,ue)]))),128))])):u("",!0),e.form.errors.cpt_code_id?(n(),_(f,{key:1},{default:t(()=>[a(m(e.form.errors.cpt_code_id),1)]),_:1})):u("",!0)]}),_:1}),r(y,null,{default:t(()=>[r(h,null,{default:t(()=>[a("Piloting Physician")]),_:1}),r(g,{options:(o.physicians||o.physicians).data.map(i=>({label:i.name,value:i.user_id})),error:e.form.errors.doctor_user_id,disabled:e.form.processing,required:!0,modelValue:e.form.doctor_user_id,"onUpdate:modelValue":s[4]||(s[4]=i=>e.form.doctor_user_id=i)},null,8,["options","error","disabled","modelValue"]),e.form.errors.doctor_user_id?(n(),_(f,{key:0},{default:t(()=>[a(m(e.form.errors.doctor_user_id),1)]),_:1})):u("",!0)]),_:1}),r(y,null,{default:t(()=>[r(h,null,{default:t(()=>[a("Billing Type")]),_:1}),r(g,{options:["LOP","Insurance"].map(i=>({label:i,value:i})),error:e.form.errors.billing_type,disabled:e.form.processing,required:!0,modelValue:e.form.billing_type,"onUpdate:modelValue":s[5]||(s[5]=i=>e.form.billing_type=i)},null,8,["options","error","disabled","modelValue"]),e.form.errors.billing_type?(n(),_(f,{key:0},{default:t(()=>[a(m(e.form.errors.billing_type),1)]),_:1})):u("",!0)]),_:1})]),_:1})]),r(w,{"onUpdate:insuranceData":v.handleInsuranceData},null,8,["onUpdate:insuranceData"]),r(c,{attorneys:o.attorneys,doctors:o.doctors,"document-categories":o.documentCategories,form:e.form,"medical-specialties":o.medicalSpecialties,patients:o.patients,"referral-reasons":o.referralReasons,"referral-statuses":o.referralStatuses,states:o.states},null,8,["attorneys","doctors","document-categories","form","medical-specialties","patients","referral-reasons","referral-statuses","states"]),r(S,{attorneys:o.attorneys,doctors:o.doctors,"document-categories":o.documentCategories,form:e.form,"medical-specialties":o.medicalSpecialties,patients:o.patients,"referral-reasons":o.referralReasons,"referral-statuses":o.referralStatuses,states:o.states,icdCodes:o.icdCodes},null,8,["attorneys","doctors","document-categories","form","medical-specialties","patients","referral-reasons","referral-statuses","states","icdCodes"]),r(V,{attorneys:o.attorneys,doctors:o.doctors,"document-categories":o.documentCategories,form:e.form,"medical-specialties":o.medicalSpecialties,patients:o.patients,"referral-reasons":o.referralReasons,"referral-statuses":o.referralStatuses,states:o.states},null,8,["attorneys","doctors","document-categories","form","medical-specialties","patients","referral-reasons","referral-statuses","states"]),r(R,{attorneys:o.attorneys,doctors:o.doctors,"document-categories":o.documentCategories,form:e.form,"medical-specialties":o.medicalSpecialties,patients:o.patients,"referral-reasons":o.referralReasons,"referral-statuses":o.referralStatuses,states:o.states},null,8,["attorneys","doctors","document-categories","form","medical-specialties","patients","referral-reasons","referral-statuses","states"]),r(y,{class:"col-span-full flex items-center justify-end gap-2 text-right border-t border-gray-200 bg-gray-50 px-6 py-4"},{default:t(()=>[e.form.progress?(n(),b("progress",{key:0,value:e.form.progress.percentage,max:"100"},m(e.form.progress.percentage)+"% ",9,me)):u("",!0),r(O,{href:p.route(o.listRoute),color:"white",disabled:e.form.processing},{default:t(()=>[a(" Cancel ")]),_:1},8,["href","disabled"]),r(O,{disabled:e.form.processing},{default:t(()=>[a(" Create Referral ")]),_:1},8,["disabled"])]),_:1})])]),_:1},8,["onSubmit"])}const be=P(ie,[["render",fe],["__scopeId","data-v-91bba3a1"]]);export{be as R};
