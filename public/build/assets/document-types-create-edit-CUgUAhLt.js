import{L as O}from"./index-CUO78Va1.js";import{T as F,r as m,o as c,c as a,a as o,g as T,w as t,F as f,b as n,t as i,d as N,e as u,f as _,i as R}from"./app-BXgbEd8A.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_user-menu-ENtOGCbS.js";const U={name:"DocumentTypesCreateEdit",layout:O,props:{documentType:{type:Object,required:!1,default:()=>{}},documentCategories:{type:Object,required:!1,defualt:()=>{}},states:{type:Object,required:!1,defualt:()=>{}}},data(){return{form:F({name:"",description:"",document_category_id:"",state_ids:[]})}},watch:{documentType:{handler(r){!r||!r.data||(this.form.name=r.data.name,this.form.description=r.data.description,this.form.document_category_id=r.data.document_category_id,this.form.state_ids=r.data.states.map(s=>s.state_id))},immediate:!0}},methods:{submitForm(){this.form.clearErrors(),this.documentType&&this.documentType.data&&this.documentType.data.document_type_id?this.updateRequest():this.storeRequest()},storeRequest(){this.form.post(this.route("panel.admin.document-types.store"),{onSuccess:()=>this.$toast().success("Document type created successfully!"),onError:r=>{Object.keys(r).forEach(s=>{const d=r[s];this.$toast().error(d)})}})},updateRequest(){this.form.patch(this.route("panel.admin.document-types.update",{document_type:this.documentType.data.document_type_id}),{onSuccess:()=>this.$toast().success("Document type updated successfully!"),onError:r=>{Object.keys(r).forEach(s=>{const d=r[s];this.$toast().error(d)})}})},deleteRequest(){this.$alert().confirm(()=>new Promise((r,s)=>{this.form.delete(this.route("panel.admin.document-types.destroy",{documentType:this.documentType.data.document_type_id}),{onSuccess:()=>{this.$toast().success("Document type deleted successfully!"),r()},onError:d=>{Object.keys(d).forEach(b=>{const e=d[b];this.$toast().error(e)}),s()}})}))}}},L={class:"h-full flex flex-col"},M={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"},P=["value"];function z(r,s,d,b,e,k){const x=m("v-inertia-head"),V=m("v-section-heading"),v=m("v-content-body"),y=m("v-form-label"),C=m("v-form-input"),g=m("v-form-error"),p=m("v-form-group"),E=m("v-form-select"),D=m("v-form-checkbox"),q=m("v-form-textarea"),h=m("v-button"),w=m("v-form");return c(),a(f,null,[o(x,{title:d.documentType?`Editing '${d.documentType.data.name}' documentType.`:"Create Document Type"},null,8,["title"]),T("div",L,[o(v,{class:"border-b border-gray-200"},{default:t(()=>[o(V,null,{title:t(()=>[d.documentType?(c(),a(f,{key:1},[n(" Editing '"+i(d.documentType.data.name)+"' documentType. ",1)],64)):(c(),a(f,{key:0},[n(" Create Document Type ")],64))]),description:t(()=>[d.documentType?(c(),a(f,{key:1},[n(" Change and/or modify the details for the documentType. ")],64)):(c(),a(f,{key:0},[n(" Fill up the form below to create a new document type for the application. ")],64))]),_:1})]),_:1}),o(v,null,{default:t(()=>[o(w,{class:"grid grid-cols-1 sm:grid-cols-2 gap-6",onSubmit:N(k.submitForm,["prevent"])},{default:t(()=>[o(p,{class:"col-span-full sm:col-span-1"},{default:t(()=>[o(y,null,{default:t(()=>[n("Name")]),_:1}),o(C,{type:"text",modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=l=>e.form.name=l),error:e.form.errors.name,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.name?(c(),u(g,{key:0},{default:t(()=>[n(i(e.form.errors.name),1)]),_:1})):_("",!0)]),_:1}),o(p,{class:"col-span-full sm:col-span-1"},{default:t(()=>[o(y,null,{default:t(()=>[n("Document Category")]),_:1}),o(E,{options:d.documentCategories.data.map(l=>({label:l.name,value:l.document_category_id})),error:e.form.errors.document_category_id,disabled:e.form.processing,modelValue:e.form.document_category_id,"onUpdate:modelValue":s[1]||(s[1]=l=>e.form.document_category_id=l)},null,8,["options","error","disabled","modelValue"]),e.form.errors.document_category_id?(c(),u(g,{key:0},{default:t(()=>[n(i(e.form.errors.document_category_id),1)]),_:1})):_("",!0)]),_:1}),o(p,{class:"col-span-full"},{default:t(()=>[o(y,null,{default:t(()=>[n("States")]),_:1}),T("div",M,[(c(!0),a(f,null,R(d.states.data,(l,S)=>(c(),u(D,{key:"state_"+S,modelValue:e.form.state_ids,"onUpdate:modelValue":s[2]||(s[2]=j=>e.form.state_ids=j),value:l.state_id,disabled:e.form.processing},{default:t(()=>[n(i(l.name),1)]),_:2},1032,["modelValue","value","disabled"]))),128))]),e.form.errors.state_ids?(c(),u(g,{key:0},{default:t(()=>[n(i(e.form.errors.state_ids),1)]),_:1})):_("",!0)]),_:1}),o(p,{class:"col-span-full"},{default:t(()=>[o(y,null,{default:t(()=>[n("Description")]),_:1}),o(q,{modelValue:e.form.description,"onUpdate:modelValue":s[3]||(s[3]=l=>e.form.description=l),error:e.form.errors.description,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.description?(c(),u(g,{key:0},{default:t(()=>[n(i(e.form.errors.description),1)]),_:1})):_("",!0)]),_:1}),o(p,{class:"col-span-full flex items-center justify-end gap-2 text-right border-t border-gray-200 py-6"},{default:t(()=>[e.form.progress?(c(),a("progress",{key:0,value:e.form.progress.percentage,max:"100"},i(e.form.progress.percentage)+"% ",9,P)):_("",!0),o(h,{href:r.route("panel.admin.document-types.index"),color:"white",disabled:e.form.processing},{default:t(()=>[n(" Cancel ")]),_:1},8,["href","disabled"]),d.documentType?(c(),u(h,{key:2,disabled:e.form.processing},{default:t(()=>[n(" Save Changes ")]),_:1},8,["disabled"])):(c(),u(h,{key:1,disabled:e.form.processing},{default:t(()=>[n(" Create Document Type ")]),_:1},8,["disabled"]))]),_:1})]),_:1},8,["onSubmit"])]),_:1})])],64)}const J=B(U,[["render",z]]);export{J as default};
