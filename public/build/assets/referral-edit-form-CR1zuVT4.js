import{R as I,a as U,b as H}from"./_referral-patient-form-DlZeX9sM.js";import{T as A,r as m,o as d,e as g,w as e,g as s,a as t,b as a,t as o,f as h,c as _,F as p,i as O,d as R}from"./app-Bi_K_mTy.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={name:"ReferralsCreateForm",components:{"x-referral-attorney-form":I,"x-referral-doctor-form":U,"x-referral-patient-form":H},props:{allowSourceEdit:{type:Boolean,required:!1,default:()=>!0},attorneys:{type:Object,required:!0,default:()=>{}},doctors:{type:Object,required:!0,default:()=>{}},documentCategories:{type:Object,required:!1,default:()=>{}},medicalSpecialties:{type:Object,required:!0,default:()=>{}},patients:{type:Object,required:!0,default:()=>{}},referral:{type:Object,required:!0,default:()=>{}},referralReasons:{type:Object,required:!1,default:()=>{}},referralStatuses:{type:Object,required:!1,default:()=>{}},sources:{type:Object,required:!1,default:()=>{}},states:{type:Object,required:!1,default:()=>{}},listRoute:{type:String,required:!1,default:()=>"panel.admin.referrals.index"},updateRoute:{type:String,required:!1,default:()=>"panel.admin.referrals.update"},destroyDocumentRoute:{type:String,required:!1,default:()=>"panel.admin.documents.destroy"}},data(){return{formDocuments:{},form:A({_method:"patch",referral_date:"",referral_status_id:"",state_id:"",source_user_id:this.$page.props.auth.user.user_id,documents:{}})}},watch:{referral:{handler(n){!n||!n.data||(this.form.referral_date=n.data.referral_date,this.form.referral_status_id=n.data.referral_status_id,this.form.state_id=n.data.state_id,this.form.documents={},this.populateFormDocuments())},immediate:!0,deep:!0}},methods:{populateFormDocuments(){if(!this.referral.data||!this.referral.data.documents)return;const n={};Object.keys(this.referral.data.documents).forEach(f=>{const r=JSON.parse(JSON.stringify(this.referral.data.documents[f]));n[r.document_type_id]=r,this.form.documents[r.document_type_id]=""}),this.formDocuments=n},submitForm(){this.form.clearErrors(),Object.keys(this.form.documents).forEach(n=>{this.form.documents[n]||(this.form.documents[n]=void 0)}),this.form.post(this.route(this.updateRoute,{referral:this.referral.data.referral_id}),{onSuccess:()=>{this.$toast().success("Referral updated successfully!"),this.$inertia.reload()},onError:n=>{Object.keys(n).forEach(f=>{const r=n[f];this.$toast().error(r)})}})},destroyDocument(n,f){this.form.delete(this.route(this.destroyDocumentRoute,{document:n}),{onSuccess:()=>{this.$toast().success("Document deleted successfully!"),this.$inertia.reload()},onError:r=>{Object.keys(r).forEach(S=>{const l=r[S];this.$toast().error(l)})}})}}},L={class:"h-full divide-y divide-gray-200 space-y-12"},G={class:"divide-y divide-gray-200"},K=s("div",{class:"flex items-center gap-2"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),s("span",{class:"text-primary-500"},"Doctor"),a(" Information ")],-1),Q={key:0,class:"italic"},W={key:1,class:"italic"},X={class:"flex items-center gap-2 italic"},Y=s("div",{class:"w-1 h-1 rounded-full bg-gray-500"},null,-1),Z=s("div",null,"Â ",-1),T={class:"flex items-center gap-2 italic"},$=s("div",{class:"w-1 h-1 rounded-full bg-gray-500"},null,-1),ee={class:"divide-y divide-gray-200"},te=s("div",{class:"flex items-center gap-2"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),s("span",{class:"text-primary-500"},"Patient"),a(" Information ")],-1),re={class:"flex items-center gap-2 italic"},se=s("div",{class:"w-1 h-1 rounded-full bg-gray-500"},null,-1),ae={class:"flex flex-col gap-2"},le={class:"flex items-center gap-2"},oe={class:"divide-y divide-gray-200"},de=s("div",{class:"flex items-center gap-2"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),s("span",{class:"text-primary-500"},"Attorney"),a(" Information ")],-1),ie={class:"flex items-center gap-2 italic"},ne=s("div",{class:"w-1 h-1 rounded-full bg-gray-500"},null,-1),ue=s("div",null,"Â ",-1),ce={class:"flex items-center gap-2 italic"},_e=s("div",{class:"w-1 h-1 rounded-full bg-gray-500"},null,-1),fe={class:"divide-y divide-gray-200"},me=s("div",{class:"flex items-center gap-2"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),s("span",{class:"text-primary-500"},"Document"),a(" Information ")],-1),he={class:"grid grid-cols-1 gap-4"},ye={key:0,class:"space-y-1"},ge={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},pe=["onClick"],ve=s("span",{class:"text-red-500 uppercase"}," Delete ",-1),be=[ve],we={class:"py-2"},xe=["href"],ke=s("div",{class:"max-w-full overflow-hidden line-clamp-1"}," Download ",-1),De=[ke],je={key:1,class:"w-full text-center inline-flex items-center justify-center border rounded-md shadow-sm focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed px-4 py-2.5 text-sm font-medium border-gray-200 text-gray-500 bg-white opacity-50 cursor-not-allowed",href:"#",target:"_blank"},Re=s("div",{class:"max-w-full overflow-hidden line-clamp-1"}," No File ",-1),Se=[Re],Ve=s("span",{class:"text-red-500 uppercase"}," Cancel ",-1),qe={class:"overflow-hidden"},Oe=["value"];function Ce(n,f,r,S,l,V){const w=m("v-form-label"),C=m("v-form-input"),k=m("v-form-error"),v=m("v-form-group"),D=m("v-form-select"),y=m("v-content-body"),x=m("v-section-heading"),b=m("v-heading"),c=m("v-paragraph"),F=m("v-link"),E=m("v-form-file"),M=m("v-card"),q=m("v-button"),z=m("v-form");return d(),g(z,{class:"h-full",onSubmit:R(V.submitForm,["prevent"])},{default:e(()=>[s("div",L,[s("div",null,[t(y,{class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6"},{default:e(()=>[t(v,null,{default:e(()=>[t(w,null,{default:e(()=>[a("Referral Date")]),_:1}),t(C,{type:"date",modelValue:l.form.referral_date,"onUpdate:modelValue":f[0]||(f[0]=i=>l.form.referral_date=i),error:l.form.errors.referral_date,disabled:l.form.processing},null,8,["modelValue","error","disabled"]),l.form.errors.referral_date?(d(),g(k,{key:0},{default:e(()=>[a(o(l.form.errors.referral_date),1)]),_:1})):h("",!0)]),_:1}),t(v,null,{default:e(()=>[t(w,null,{default:e(()=>[a("Referral Status")]),_:1}),t(D,{options:r.referralStatuses.data.map(i=>({label:i.name,value:i.referral_status_id})),error:l.form.errors.referral_status_id,disabled:l.form.processing,required:!0,modelValue:l.form.referral_status_id,"onUpdate:modelValue":f[1]||(f[1]=i=>l.form.referral_status_id=i)},null,8,["options","error","disabled","modelValue"]),l.form.errors.referral_status_id?(d(),g(k,{key:0},{default:e(()=>[a(o(l.form.errors.referral_status_id),1)]),_:1})):h("",!0)]),_:1}),t(v,null,{default:e(()=>[t(w,null,{default:e(()=>[a("Referral State")]),_:1}),t(D,{options:r.states.data.map(i=>({label:i.name,value:i.state_id})),error:l.form.errors.state_id,disabled:!0,required:!0,modelValue:l.form.state_id,"onUpdate:modelValue":f[2]||(f[2]=i=>l.form.state_id=i)},null,8,["options","error","modelValue"]),l.form.errors.state_id?(d(),g(k,{key:0},{default:e(()=>[a(o(l.form.errors.state_id),1)]),_:1})):h("",!0)]),_:1}),r.allowSourceEdit?(d(),g(v,{key:0},{default:e(()=>[t(w,null,{default:e(()=>[a("Referral Source")]),_:1}),t(D,{options:[{label:n.$page.props.auth.user.name,value:n.$page.props.auth.user.user_id},...r.sources.data.map(i=>({label:i.name,value:i.user_id}))],error:l.form.errors.source_user_id,disabled:l.form.processing,modelValue:l.form.source_user_id,"onUpdate:modelValue":f[3]||(f[3]=i=>l.form.source_user_id=i)},null,8,["options","error","disabled","modelValue"]),l.form.errors.source_user_id?(d(),g(k,{key:0},{default:e(()=>[a(o(l.form.errors.source_user_id),1)]),_:1})):h("",!0)]),_:1})):h("",!0)]),_:1})]),s("div",G,[t(y,{class:""},{default:e(()=>[t(x,null,{title:e(()=>[K]),_:1})]),_:1}),t(y,{class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4"},{default:e(()=>[s("div",null,[t(b,{size:6,class:"font-medium"},{default:e(()=>[a(o(r.referral.data.doctor_user.name)+" ",1),r.referral.data.doctor_user.medical_specialty?(d(),_("span",Q,"("+o(r.referral.data.doctor_user.medical_specialty.name)+")",1)):(d(),_("span",W,"(No Medical Specialty)"))]),_:1}),s("div",X,[t(c,null,{default:e(()=>[a(o(r.referral.data.doctor_user.email),1)]),_:1}),Y,t(c,null,{default:e(()=>[a(o(r.referral.data.doctor_user.phone_number),1)]),_:1})]),Z]),s("div",null,[t(b,{size:6,class:"font-medium"},{default:e(()=>[a(o(r.referral.data.clinic.name),1)]),_:1}),s("div",T,[t(c,null,{default:e(()=>[a(o(r.referral.data.clinic.email),1)]),_:1}),$,t(c,null,{default:e(()=>[a(o(r.referral.data.clinic.phone_number),1)]),_:1})]),t(c,{class:"italic"},{default:e(()=>[a(o(r.referral.data.clinic.address_line_1)+", ",1),r.referral.data.clinic.address_line_2?(d(),_(p,{key:0},[a(o(r.referral.data.clinic.address_line_2)+",",1)],64)):h("",!0),a(" "+o(r.referral.data.clinic.city)+", "+o(r.referral.data.clinic.state.name)+", "+o(r.referral.data.clinic.zip_code),1)]),_:1})])]),_:1})]),s("div",ee,[t(y,{class:""},{default:e(()=>[t(x,null,{title:e(()=>[te]),_:1})]),_:1}),t(y,{class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4"},{default:e(()=>[s("div",null,[t(b,{size:6,class:"font-medium"},{default:e(()=>[a(o(r.referral.data.patient_user.name),1)]),_:1}),s("div",re,[t(c,null,{default:e(()=>[a(o(r.referral.data.patient_user.email),1)]),_:1}),se,t(c,null,{default:e(()=>[a(o(r.referral.data.patient_user.phone_number),1)]),_:1})]),t(c,{class:"italic"},{default:e(()=>[a(o(r.referral.data.patient_user.address_line_1)+", ",1),r.referral.data.patient_user.address_line_2?(d(),_(p,{key:0},[a(o(r.referral.data.patient_user.address_line_2)+",",1)],64)):h("",!0),a(" "+o(r.referral.data.patient_user.city)+", "+o(r.referral.data.patient_user.state.name)+", "+o(r.referral.data.patient_user.zip_code),1)]),_:1})]),s("div",ae,[s("div",null,[t(b,{size:6},{default:e(()=>[a("Injury Date")]),_:1}),t(c,{class:"italic"},{default:e(()=>[a(o(r.referral.data.injury_date||"Missing Injury Date"),1)]),_:1})]),s("div",null,[t(b,{size:6,class:"font-medium"},{default:e(()=>[a("Referral Reasons")]),_:1}),s("div",le,[t(c,{class:"italic"},{default:e(()=>[a(o(r.referral.data.referral_reasons.map(i=>i.name)),1)]),_:1})])])])]),_:1})]),s("div",oe,[t(y,{class:""},{default:e(()=>[t(x,null,{title:e(()=>[de]),_:1})]),_:1}),t(y,{class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4"},{default:e(()=>[s("div",null,[t(b,{size:6,class:"font-medium"},{default:e(()=>[a(o(r.referral.data.attorney_user.name),1)]),_:1}),s("div",ie,[t(c,null,{default:e(()=>[a(o(r.referral.data.attorney_user.email),1)]),_:1}),ne,t(c,null,{default:e(()=>[a(o(r.referral.data.attorney_user.phone_number),1)]),_:1})]),ue]),s("div",null,[t(b,{size:6,class:"font-medium"},{default:e(()=>[a(o(r.referral.data.attorney_user.law_firm.name),1)]),_:1}),s("div",ce,[t(c,null,{default:e(()=>[a(o(r.referral.data.attorney_user.law_firm.email),1)]),_:1}),_e,t(c,null,{default:e(()=>[a(o(r.referral.data.attorney_user.law_firm.phone_number),1)]),_:1})]),t(c,{class:"italic"},{default:e(()=>[a(o(r.referral.data.attorney_user.law_firm.address_line_1)+", ",1),r.referral.data.attorney_user.law_firm.address_line_2?(d(),_(p,{key:0},[a(o(r.referral.data.attorney_user.law_firm.address_line_2)+",",1)],64)):h("",!0),a(" "+o(r.referral.data.attorney_user.law_firm.city)+", "+o(r.referral.data.attorney_user.law_firm.state.name)+", "+o(r.referral.data.attorney_user.law_firm.zip_code),1)]),_:1})])]),_:1})]),s("div",fe,[t(y,{class:""},{default:e(()=>[t(x,null,{title:e(()=>[me]),_:1})]),_:1}),t(y,null,{default:e(()=>[s("div",he,[(d(!0),_(p,null,O(r.documentCategories.data,(i,B)=>(d(),_(p,{key:"documentCategory_"+B},[i.document_types&&i.document_types.length?(d(),_("div",ye,[t(x,null,{title:e(()=>[a(o(i.name),1)]),_:2},1024),s("div",ge,[(d(!0),_(p,null,O(i.document_types,(u,N)=>(d(),g(M,{key:"documentType_"+N},{default:e(()=>[t(y,{class:"flex flex-col divide-y divide-gray-200"},{default:e(()=>[t(v,{class:"pb-4"},{default:e(()=>[t(w,{class:"flex items-center justify-between"},{default:e(()=>[a(o(u.name)+" ",1),l.formDocuments[u.document_type_id]&&!u.is_generated?(d(),_("a",{key:0,href:"#",onClick:R(j=>V.destroyDocument(l.formDocuments[u.document_type_id].document_id,u.document_type_id),["stop"])},be,8,pe)):h("",!0)]),_:2},1024),s("div",we,[l.formDocuments[u.document_type_id]&&l.formDocuments[u.document_type_id].document_id?(d(),_("a",{key:0,class:"w-full text-center inline-flex items-center justify-center border rounded-md shadow-sm focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed px-4 py-2.5 text-sm font-medium border-gray-200 hover:border-gray-800 text-gray-500 bg-white hover:bg-gray-800 hover:text-white",href:n.route("panel.admin.documents.download",{document:l.formDocuments[u.document_type_id].document_id,_t:Date.now()}),target:"_blank"},De,8,xe)):(d(),_("a",je,Se))])]),_:2},1024),u.is_generated?(d(),g(v,{key:1,class:"pt-4"},{default:e(()=>[t(c,{class:"italic"},{default:e(()=>[a(" System generated documents cannot be replaced or removed. ")]),_:1})]),_:1})):(d(),g(v,{key:0,class:"pt-4"},{default:e(()=>[t(w,{class:"flex items-center justify-between"},{default:e(()=>[u.is_generated?(d(),_(p,{key:0},[a(" -- ")],64)):l.formDocuments[u.document_type_id]&&l.formDocuments[u.document_type_id].document_id?(d(),_(p,{key:1},[a(" Replace Document ")],64)):(d(),_(p,{key:2},[a(" Upload Document ")],64)),l.form.documents[u.document_type_id]?(d(),g(F,{key:3,href:"#",onClick:R(j=>l.form.documents[u.document_type_id]=void 0,["stop"])},{default:e(()=>[Ve]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024),s("div",qe,[t(E,{modelValue:l.form.documents[u.document_type_id],"onUpdate:modelValue":j=>l.form.documents[u.document_type_id]=j,disabled:l.form.processing||u.is_generated},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),_:2},1024))]),_:2},1024)]),_:2},1024))),128))])])):h("",!0)],64))),128))])]),_:1})]),t(v,{class:"col-span-full flex items-center justify-end gap-2 text-right border-t border-gray-200 bg-gray-50 px-6 py-4"},{default:e(()=>[l.form.progress?(d(),_("progress",{key:0,value:l.form.progress.percentage,max:"100"},o(l.form.progress.percentage)+"% ",9,Oe)):h("",!0),t(q,{href:n.route(this.listRoute),color:"white",disabled:l.form.processing},{default:e(()=>[a(" Cancel ")]),_:1},8,["href","disabled"]),t(q,{disabled:l.form.processing},{default:e(()=>[a(" Save Changes ")]),_:1},8,["disabled"])]),_:1})])]),_:1},8,["onSubmit"])}const ze=J(P,[["render",Ce]]);export{ze as R};
