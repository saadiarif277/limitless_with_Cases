import{L as x}from"./index-CUO78Va1.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as w,c as V,a as t,w as e,b as n,g as r,t as _}from"./app-BXgbEd8A.js";import"./_user-menu-ENtOGCbS.js";const D={layout:x,props:{ictCodes:{type:[Object,Array],required:!0,default:()=>[]}},data(){return{showModal:!1,bulkFile:null,columns:{code:{label:"ICT Code",align:"right"},description:{label:"Description",align:"right"},created_at:{label:"Created At",align:"right"}}}},methods:{formatDate(s){try{return format(new Date(s),"yyyy-MM-dd HH:mm")}catch{return s}},openModal(){this.showModal=!0},closeModal(){this.showModal=!1},submitBulkUpload(){if(!this.bulkFile){this.$toast.error("Please select a file.");return}const s=new FormData;s.append("file",this.bulkFile),this.$inertia.post(route("panel.admin.ictcodes.bulk-upload"),s,{onSuccess:()=>{this.closeModal(),this.$toast.success("Data Imported successfully!")},onError:a=>{this.closeModal(),a.file?this.$toast.error(a.file[0]):this.$toast.error("Failed to upload file.")}})}}},F={class:"h-full flex flex-col"},B={class:"text-center"},U={class:"text-center"},I={class:"text-center"};function T(s,a,i,L,c,d){const u=o("v-button"),p=o("v-section-heading"),f=o("v-content-body"),h=o("v-app-model-table"),v=o("v-card-title"),b=o("v-file-input"),C=o("v-card-text"),m=o("v-btn"),k=o("v-card-actions"),y=o("v-card"),g=o("v-dialog");return w(),V("div",F,[t(f,{class:"border-b border-gray-200 py-4 px-6"},{default:e(()=>[t(p,null,{title:e(()=>[n(" ICT Codes Listing ")]),description:e(()=>[n(" Manage ICT Codes available in the application. ")]),actions:e(()=>[t(u,{href:s.route("panel.admin.ictcodes.create"),class:"mr-2"},{default:e(()=>[n(" Create ICT Code ")]),_:1},8,["href"]),t(u,{onClick:d.openModal,class:"ml-1"},{default:e(()=>[n(" Upload in Bulk ")]),_:1},8,["onClick"])]),_:1})]),_:1}),t(h,{class:"table-container",columns:c.columns,data:i.ictCodes.data||i.ictCodes,links:i.ictCodes.links||[],meta:i.ictCodes.meta||[]},{column_id:e(({row:l})=>[r("div",B,_(l.code),1)]),column_description:e(({row:l})=>[r("div",U,_(l.description),1)]),column_created_at:e(({row:l})=>[r("div",I,_(d.formatDate(l.created_at)),1)]),_:1},8,["columns","data","links","meta"]),t(g,{modelValue:c.showModal,"onUpdate:modelValue":a[1]||(a[1]=l=>c.showModal=l),"max-width":"450"},{default:e(()=>[t(y,{class:"pa-4"},{default:e(()=>[t(v,{class:"text-h5 text-center"},{default:e(()=>[n("Upload ICT Codes in Bulk")]),_:1}),t(C,{class:"mt-2"},{default:e(()=>[t(b,{modelValue:c.bulkFile,"onUpdate:modelValue":a[0]||(a[0]=l=>c.bulkFile=l),label:"Select CSV File",accept:".csv",required:"",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),t(k,{class:"justify-end"},{default:e(()=>[t(m,{onClick:d.submitBulkUpload,color:"primary"},{default:e(()=>[n("Upload")]),_:1},8,["onClick"]),t(m,{onClick:d.closeModal,color:"grey darken-1"},{default:e(()=>[n("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const A=M(D,[["render",T]]);export{A as default};
