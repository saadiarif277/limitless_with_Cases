import{L as q}from"./index-DCEuP7LO.js";import{j as S,r as h,o as a,c as i,a as o,g as e,F as b,i as V,w as l,f,t as m,b as c,n as w,e as M,d as $,l as k,A as z,q as R,m as ee,p as te,k as se}from"./app-D0YmfmiQ.js";import{d as oe}from"./index.esm-DFiX2cTG.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_user-menu-Bj-M8e4u.js";const ae={layout:q,components:{DocusealForm:oe},props:{caseDetails:{type:Object,required:!0},referrals:{type:Array,required:!0},userRole:{type:String,required:!0},userId:{type:Number,required:!0},allCptCodes:{type:Array,required:!0},reductionRequests:{type:Array,required:!1,default:()=>[]}},data(){return{tabs:[{name:"patient",label:"Patient Information"},{name:"attorney",label:"Attorney Information"},{name:"policy",label:"Policy Limit Information"},{name:"referrals",label:"Referrals"},{name:"reduction-requests",label:"Reduction Requests",show:()=>["Doctor","Attorney","Case_manager"].includes(this.userRole)},{name:"cms",label:"CMS 1500 Form"},{name:"billing",label:"Billing Information"}],activeTab:"patient",formData:null,savedFormId:null,billingType:this.caseDetails.billing_type||"Insurance",form:{cptCodes:[],processing:!1},isModalOpen:!1,reductionAmount:null,reductionFile:null,isFormValid:!0,selectedReferralId:null}},created(){if(this.caseDetails.cpt_codes)try{this.form.cptCodes=JSON.parse(this.caseDetails.cpt_codes)}catch(s){console.error("Error parsing CPT codes:",s),this.form.cptCodes=[]}},watch:{reductionAmount(s){this.validateForm()},reductionFile(s){this.validateForm()}},computed:{calculateRemainingPolicyLimit(){var d;const s=parseFloat(((d=this.caseDetails.policy_limit_info)==null?void 0:d.policy_limit)||0),u=this.calculateTotalBilledAmount;return(s-u).toFixed(2)},calculateTotalBilledAmount(){return this.form.cptCodes?this.form.cptCodes.reduce((s,u)=>s+(parseFloat(u.value)||0),0).toFixed(2):"0.00"},selectedFileName(){return this.reductionFile?this.reductionFile.name:"No file selected"}},methods:{formatDate(s){return s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"},getStatusBadgeClass(s){switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"reduction_request_sent":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},getStatusText(s){switch(s){case"pending":return"Pending";case"reduction_request_sent":return"Request Sent";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return"Unknown Status"}},getDoctorDecisionBadgeClass(s){switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},getDoctorDecisionText(s){switch(s){case"pending":return"Pending";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return"Unknown Decision"}},markReferralComplete(s){this.$toast().success(`Referral #${s} marked as complete!`)},markReferralLost(s){this.$toast().info(`Referral #${s} marked as lost.`)},openReductionModal(s){this.selectedReferralId=s,this.isModalOpen=!0},closeReductionModal(){this.isModalOpen=!1,this.reductionAmount=null,this.reductionFile=null,this.selectedReferralId=null,this.isFormValid=!0},validateForm(){this.isFormValid=!!(this.reductionAmount&&this.reductionFile&&this.selectedReferralId)},handleFileChange(s){const u=s.target.files[0];if(u){if(u.size>2*1024*1024){this.$toast().error("File size must be less than 2MB"),s.target.value="",this.reductionFile=null;return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(u.type)){this.$toast().error("Please select a valid file type (PDF, DOC, or DOCX)"),s.target.value="",this.reductionFile=null;return}this.reductionFile=u}},async submitDecision(s){if(!s.decision){this.$toast().error("Please select a decision");return}s.processing=!0;try{(await this.$inertia.put(route("panel.user.cases.reduction-requests.update-decision",{case:this.caseDetails.case_id,reductionRequest:s.id}),{doctor_decision:s.decision,counter_offer:s.counter_offer||null,notes:s.notes||null})).status===200&&(this.$toast().success("Decision submitted successfully"),s.doctor_decision=s.decision,s.processing=!1,s.decision=null,s.counter_offer=null,s.notes="")}catch(u){this.$toast().error("Error submitting decision. Please try again."),console.error("Error:",u)}finally{s.processing=!1}},resetDecisionForm(s){s.decision=null,s.counter_offer=null,s.notes=""},async submitReduction(){if(!this.reductionAmount||!this.reductionFile||!this.selectedReferralId){this.$toast().error("Please fill in all required fields");return}if(this.reductionAmount<=0){this.$toast().error("Reduction amount must be greater than 0");return}if(this.isFormValid&&this.selectedReferralId){const s=new FormData;s.append("case_id",this.caseDetails.case_id),s.append("referral_id",this.selectedReferralId),s.append("amount",this.reductionAmount),s.append("referral_status","reduction_request_sent"),this.reductionFile&&s.append("file",this.reductionFile);try{const u=await S.post(route("panel.user.cases.reduction-requests.create",{case:this.caseDetails.case_id}),s,{headers:{"Content-Type":"multipart/form-data"}});this.$toast().info("Reduction request sent successfully."),this.closeReductionModal(),this.$inertia.reload()}catch(u){this.$toast().error("Error sending reduction request."),console.error("Error:",u.response.data)}}},async handleFormSubmit(s){this.formData=s,await this.saveFormToDatabase(s,"completed")},async handleFormSave(s){this.formData=s,await this.saveFormToDatabase(s,"draft")},addCptCode(){this.form.cptCodes.push({code:"",value:""})},removeCptCode(s){this.form.cptCodes.splice(s,1)},getCptCodeDescription(s){const u=this.allCptCodes.find(d=>d.id===s);return u?`${u.code} - ${u.description}`:"Unknown CPT Code"},async saveCase(){this.form.processing=!0;try{const s=await this.$inertia.put(route("panel.user.cases.updateBilling",{case:this.caseDetails.case_id}),{cpt_codes:JSON.stringify(this.form.cptCodes),billing_type:this.billingType});this.$toast().success("Billing information saved successfully")}catch(s){this.$toast().error("Error saving billing information"),console.error("Error:",s)}finally{this.form.processing=!1}},async saveFormToDatabase(s,u){try{const d=await S.post(route("panel.user.cases.saveForm",{case:this.caseDetails.case_id}),{form_data:s,status:u});d.data.success&&(this.savedFormId=d.data.form_id,this.$toast().success("Form saved successfully!"))}catch(d){this.$toast().error("Error saving form"),console.error("Error saving form:",d)}},async saveFormForLater(){this.formData?await this.saveFormToDatabase(this.formData,"draft"):this.$toast().warning("No form data to save")},async downloadFormPDF(){if(!this.savedFormId){this.$toast().warning("Please save the form first");return}try{const s=await S.get(route("panel.user.cases.downloadForm",{case:this.caseDetails.case_id,form:this.savedFormId}),{responseType:"blob"}),u=new Blob([s.data],{type:"application/pdf"}),d=window.URL.createObjectURL(u),C=document.createElement("a");C.href=d,C.download=`CMS-1500-Form-${this.caseDetails.case_id}.pdf`,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(d),this.$toast().success("Form downloaded successfully!")}catch(s){this.$toast().error("Error downloading form"),console.error("Error downloading form:",s)}},addCptCode(){this.form.cptCodes.push({code:"",value:""})},removeCptCode(s){this.form.cptCodes.splice(s,1)},getCptCodeDescription(s){const u=this.allCptCodes.find(d=>d.id===s);return u?`${u.code} - ${u.description}`:"Unknown CPT Code"},async saveCase(){if(this.userRole!=="Doctor"){this.$toast().error("Only doctors can update billing information.");return}const s={billing_type:this.billingType,cpt_codes:JSON.stringify(this.form.cptCodes),is_cms1500_generated:!0};try{const u=await S.post(route("panel.user.cases.updateBilling",{case:this.caseDetails.case_id}),s,{headers:{"Content-Type":"application/json"}});this.$toast().success("Billing information updated successfully."),this.$inertia.reload()}catch(u){this.$toast().error("Error updating billing information."),console.error("Error:",u.response?u.response.data:u.message)}}}},r=s=>(te("data-v-30629193"),s=s(),se(),s),ie={class:"h-full space-y-6"},re={class:"bg-dark shadow-sm rounded-lg p-6 pb-8"},ne=r(()=>e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Case View",-1)),de={class:"flex space-x-4 border-b pb-3"},ce=["onClick"],ue={class:"bg-white shadow-sm rounded-lg p-6"},me={key:0},_e=r(()=>e("div",{class:"flex items-center gap-2 text-xl font-semibold text-gray-700"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"Patient Information")],-1)),pe={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-6"},fe={class:"flex items-center gap-3"},he={class:"flex items-center gap-3"},ge=r(()=>e("svg",{class:"w-5 h-5 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M16 12H8m8 0a4 4 0 00-8 0m8 0a4 4 0 01-8 0m8 0V9a3 3 0 00-6 0v3m6 0a3 3 0 11-6 0"})],-1)),ye={class:"flex items-start gap-3 col-span-2"},ve=r(()=>e("svg",{class:"w-5 h-5 text-gray-600 mt-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 2C8.134 2 5 5.134 5 9c0 4.656 7 11 7 11s7-6.344 7-11c0-3.866-3.134-7-7-7zM12 11a2 2 0 110-4 2 2 0 010 4z"})],-1)),xe={key:1,class:"bg-white shadow-md rounded-lg p-6"},be=r(()=>e("div",{class:"flex items-center gap-2 border-b pb-3 mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("h2",{class:"text-lg font-semibold text-gray-700"},"Attorney Information")],-1)),we={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ke={class:"text-base font-medium text-gray-800"},Ce={class:"flex flex-col gap-2 text-gray-600"},De={class:"text-sm"},Fe=r(()=>e("span",{class:"font-medium text-gray-700"},"Email:",-1)),Ve={key:2},Ae={class:"bg-white rounded-lg shadow-md p-6"},Te=r(()=>e("div",{class:"flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"Policy Limit"),c(" Information ")],-1)),Se={class:"mt-6"},Me={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Re={class:"flex flex-col gap-3"},Be={class:"bg-gray-50 p-4 rounded-lg"},Ne={class:"bg-gray-50 p-4 rounded-lg"},Pe={class:"bg-gray-50 p-4 rounded-lg"},Ie={class:"flex flex-col gap-3"},Ue={class:"bg-gray-50 p-4 rounded-lg"},je={class:"bg-gray-50 p-4 rounded-lg"},Oe={class:"bg-gray-50 p-4 rounded-lg"},Le={key:3},Ee=r(()=>e("div",{class:"flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"Referrals")],-1)),ze={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"},He={class:"flex flex-col gap-2"},Je={key:1,class:"text-gray-500"},Ye={key:0,class:"mt-4"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={class:"flex items-center gap-2 mb-2"},Ke={class:"text-sm font-medium text-gray-700"},Qe={class:"space-y-1 text-sm text-gray-600"},We=r(()=>e("span",{class:"font-medium"},"Requested Amount:",-1)),Ze={class:"ml-2 text-lg font-semibold text-red-600"},qe=r(()=>e("span",{class:"font-medium"},"Requested On:",-1)),$e={class:"ml-2"},et={class:"flex items-center gap-2 mb-2"},tt=r(()=>e("span",{class:"text-sm font-medium text-gray-700"},"Doctor Decision:",-1)),st={class:"space-y-1 text-sm text-gray-600"},ot={key:0},lt=r(()=>e("span",{class:"font-medium"},"Counter Offer:",-1)),at={class:"ml-2 text-lg font-semibold text-blue-600"},it={key:1},rt=r(()=>e("span",{class:"font-medium"},"Notes:",-1)),nt={class:"ml-2"},dt={key:0,class:"mt-3 pt-3 border-t border-gray-200"},ct={class:"flex items-center space-x-2"},ut=r(()=>e("svg",{class:"h-4 w-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})],-1)),mt=["href"],_t={key:1,class:"mt-4 pt-3 border-t border-gray-200"},pt=r(()=>e("h5",{class:"text-sm font-medium text-gray-700 mb-3"},"Your Response",-1)),ft=["onSubmit"],ht=r(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Decision *",-1)),gt={class:"space-y-2"},yt={class:"flex items-center"},vt=["onUpdate:modelValue"],xt=r(()=>e("span",{class:"ml-2 text-sm text-gray-700"},"Accept Reduction",-1)),bt={class:"flex items-center"},wt=["onUpdate:modelValue"],kt=r(()=>e("span",{class:"ml-2 text-sm text-gray-700"},"Reject Reduction",-1)),Ct={key:0},Dt=r(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Counter Offer (Optional)",-1)),Ft={class:"relative"},Vt=r(()=>e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),At=["onUpdate:modelValue"],Tt=r(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notes (Optional)",-1)),St=["onUpdate:modelValue"],Mt={class:"flex justify-end space-x-3"},Rt=["disabled"],Bt={key:0},Nt={key:1},Pt={class:"flex gap-2 mt-2"},It={key:4},Ut=r(()=>e("div",{class:"flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"CMS 1500 Form")],-1)),jt={class:"mt-4"},Ot={class:"mt-6 flex gap-4"},Lt={key:5},Et=r(()=>e("div",{class:"flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"Reduction Requests")],-1)),zt={class:"mt-4"},Ht={key:0,class:"text-center text-gray-500 py-8"},Jt=r(()=>e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),Yt=r(()=>e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No reduction requests",-1)),Xt=r(()=>e("p",{class:"mt-1 text-sm text-gray-500"},"No reduction requests have been sent yet.",-1)),Gt=[Jt,Yt,Xt],Kt={key:1,class:"space-y-4"},Qt={class:"flex justify-between items-start mb-4"},Wt={class:"text-lg font-medium text-gray-900"},Zt={class:"text-sm text-gray-500"},qt={class:"flex gap-2"},$t={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},es=r(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Amount Requested",-1)),ts={class:"mt-1 text-lg font-semibold text-gray-900"},ss={key:0},os=r(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Counter Offer",-1)),ls={class:"mt-1 text-lg font-semibold text-green-600"},as={key:0,class:"mb-4"},is=r(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Notes",-1)),rs={class:"mt-1 text-sm text-gray-600"},ns={key:1,class:"mb-4"},ds=r(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Attached File",-1)),cs=["href"],us=r(()=>e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),ms={key:2,class:"border-t pt-4"},_s=r(()=>e("h5",{class:"text-md font-medium text-gray-900 mb-3"},"Respond to Reduction Request",-1)),ps={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fs=r(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Decision",-1)),hs=["onUpdate:modelValue"],gs=r(()=>e("option",{value:""},"Select decision",-1)),ys=r(()=>e("option",{value:"accepted"},"Accept",-1)),vs=r(()=>e("option",{value:"rejected"},"Reject",-1)),xs=[gs,ys,vs],bs={key:0},ws=r(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Counter Offer (Optional)",-1)),ks=["onUpdate:modelValue"],Cs={class:"mt-3"},Ds=r(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Notes (Optional)",-1)),Fs=["onUpdate:modelValue"],Vs={class:"mt-4 flex gap-2"},As=["onClick","disabled"],Ts=["onClick"],Ss={key:3,class:"border-t pt-4"},Ms=r(()=>e("h5",{class:"text-md font-medium text-gray-900 mb-2"},"Doctor's Decision",-1)),Rs={class:"bg-gray-50 p-3 rounded-md"},Bs={class:"text-sm text-gray-600"},Ns=r(()=>e("strong",null,"Decision:",-1)),Ps={key:0,class:"text-sm text-gray-600 mt-1"},Is=r(()=>e("strong",null,"Counter Offer:",-1)),Us={key:1,class:"text-sm text-gray-600 mt-1"},js=r(()=>e("strong",null,"Notes:",-1)),Os={key:6},Ls={class:"bg-white rounded-lg shadow-md p-6"},Es=r(()=>e("div",{class:"flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"Billing Information")],-1)),zs={class:"mt-4"},Hs={key:0,class:"mb-6"},Js={class:"mt-2 text-sm text-gray-600"},Ys={key:0},Xs={key:1},Gs={key:1,class:"mt-6"},Ks={key:0,class:"text-gray-500 mb-4"},Qs={key:1,class:"space-y-4"},Ws={key:2,class:"mt-6"},Zs={key:3,class:"space-y-4"},qs={class:"bg-gray-50 p-4 rounded-lg"},$s=r(()=>e("p",{class:"text-sm text-gray-600"},"Billing Type",-1)),eo={class:"font-medium text-gray-800"},to={class:"bg-gray-50 p-4 rounded-lg"},so=r(()=>e("p",{class:"text-sm text-gray-600"},"CPT Codes",-1)),oo={key:0,class:"text-gray-500"},lo={key:1,class:"space-y-2"},ao={class:"font-medium text-gray-800"},io={class:"text-gray-600"},ro=r(()=>e("span",{class:"headline"},"Send for Reduction",-1)),no=r(()=>e("span",{class:"text-dark-500 italic"},"Amount for Reduction",-1)),co=r(()=>e("span",{class:"text-dark-500 italic"},"Upload Supporting File",-1)),uo={key:0,class:"mt-2 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700"},mo=r(()=>e("p",{class:"mt-1 text-xs text-gray-500"},"Accepted formats: PDF, DOC, DOCX (max 2MB)",-1));function _o(s,u,d,C,_,p){var O,L;const H=h("v-inertia-head"),D=h("v-section-heading"),J=h("v-avatar"),B=h("v-heading"),y=h("v-paragraph"),F=h("v-content-body"),P=h("v-card"),Y=h("v-link"),v=h("v-button"),X=h("DocusealForm"),A=h("v-form-label"),I=h("v-form-select"),T=h("v-form-group"),N=h("v-form-input"),G=h("v-card-title"),U=h("v-form-error"),K=h("v-form"),Q=h("v-card-text"),j=h("v-btn"),W=h("v-card-actions"),Z=h("v-dialog");return a(),i(b,null,[o(H,{title:"Case Details"}),e("div",ie,[e("div",re,[ne,e("nav",de,[(a(!0),i(b,null,V(_.tabs,t=>(a(),i("button",{key:t.name,onClick:n=>_.activeTab=t.name,class:w(["px-4 py-2 rounded-md text-sm font-medium focus:outline-none border",_.activeTab===t.name?"bg-primary-500 text-white border-primary-500 shadow-md":"text-gray-600 border-gray-300 hover:bg-gray-100"])},m(t.label),11,ce))),128))])]),e("div",ue,[_.activeTab==="patient"?(a(),i("div",me,[o(P,{class:"p-6 shadow-lg rounded-lg border border-gray-200"},{default:l(()=>[o(F,null,{default:l(()=>[o(D,null,{title:l(()=>[_e]),_:1}),e("div",pe,[e("div",fe,[o(J,{size:"40",class:"bg-primary-100 text-primary-600"},{default:l(()=>{var t,n;return[c(m(((n=(t=d.caseDetails.patient)==null?void 0:t.name)==null?void 0:n.charAt(0))||"N"),1)]}),_:1}),e("div",null,[o(B,{size:5,class:"font-semibold text-gray-800"},{default:l(()=>{var t;return[c(m(((t=d.caseDetails.patient)==null?void 0:t.name)||"N/A"),1)]}),_:1}),o(y,{class:"text-gray-500 text-sm"},{default:l(()=>[c(" Patient Name ")]),_:1})])]),e("div",he,[ge,e("div",null,[o(y,{class:"text-gray-800 font-medium"},{default:l(()=>{var t;return[c(m(((t=d.caseDetails.patient)==null?void 0:t.email)||"N/A"),1)]}),_:1}),o(y,{class:"text-gray-500 text-sm"},{default:l(()=>[c(" Email ")]),_:1})])]),e("div",ye,[ve,e("div",null,[o(y,{class:"text-gray-800 font-medium"},{default:l(()=>{var t,n;return[c(m(((t=d.caseDetails.patient)==null?void 0:t.address_line_1)||"N/A")+", "+m(((n=d.caseDetails.patient)==null?void 0:n.address_line_2)||"N/A"),1)]}),_:1}),o(y,{class:"text-gray-500 text-sm"},{default:l(()=>[c(" Address ")]),_:1})])])])]),_:1})]),_:1})])):f("",!0),_.activeTab==="attorney"?(a(),i("div",xe,[be,e("div",we,[e("div",null,[e("h3",ke,m(((O=d.caseDetails.attorney)==null?void 0:O.name)||"N/A"),1)]),e("div",Ce,[e("p",De,[Fe,c(" "+m(((L=d.caseDetails.attorney)==null?void 0:L.email)||"N/A"),1)])])])])):f("",!0),_.activeTab==="policy"?(a(),i("div",Ve,[o(F,null,{default:l(()=>[e("div",Ae,[o(D,null,{title:l(()=>[Te]),_:1}),e("div",Se,[e("div",Me,[e("div",Re,[e("div",Be,[o(y,{class:"text-sm text-gray-600"},{default:l(()=>[c(" Policy Limit: ")]),_:1}),o(y,{class:"font-medium text-gray-800"},{default:l(()=>{var t;return[c(m(((t=d.caseDetails.policy_limit_info)==null?void 0:t.policy_limit)||"N/A"),1)]}),_:1})]),e("div",Ne,[o(y,{class:"text-sm text-gray-600"},{default:l(()=>[c(" PIP: ")]),_:1}),o(y,{class:"font-medium text-gray-800"},{default:l(()=>{var t;return[c(m(((t=d.caseDetails.policy_limit_info)==null?void 0:t.pip)||"N/A"),1)]}),_:1})]),e("div",Pe,[o(y,{class:"text-sm text-gray-600"},{default:l(()=>[c(" Defendant Insurance: ")]),_:1}),o(y,{class:"font-medium text-gray-800"},{default:l(()=>{var t;return[c(m(((t=d.caseDetails.policy_limit_info)==null?void 0:t.defendant_insurance)||"N/A"),1)]}),_:1})])]),e("div",Ie,[e("div",Ue,[o(y,{class:"text-sm text-gray-600"},{default:l(()=>[c(" Plaintiff Insurance: ")]),_:1}),o(y,{class:"font-medium text-gray-800"},{default:l(()=>{var t;return[c(m(((t=d.caseDetails.policy_limit_info)==null?void 0:t.plaintiff_insurance)||"N/A"),1)]}),_:1})]),e("div",je,[o(y,{class:"text-sm text-gray-600"},{default:l(()=>[c(" Commercial Case: ")]),_:1}),o(y,{class:"font-medium text-gray-800"},{default:l(()=>{var t;return[c(m((t=d.caseDetails.policy_limit_info)!=null&&t.commercial_case?"Yes":"No"),1)]}),_:1})]),e("div",Oe,[o(y,{class:"text-sm text-gray-600"},{default:l(()=>[c(" Type of Accident: ")]),_:1}),o(y,{class:"font-medium text-gray-800"},{default:l(()=>{var t;return[c(m(((t=d.caseDetails.policy_limit_info)==null?void 0:t.type_of_accident)||"N/A"),1)]}),_:1})])])])])])]),_:1})])):f("",!0),_.activeTab==="referrals"?(a(),i("div",Le,[o(F,null,{default:l(()=>[o(D,null,{title:l(()=>[Ee]),_:1}),e("div",ze,[(a(!0),i(b,null,V(d.referrals,t=>(a(),i("div",{key:t.referral_id,class:"bg-gray-50 p-4 rounded-lg shadow-sm"},[e("div",He,[o(B,{size:6,class:"font-medium"},{default:l(()=>[t.referral_id?(a(),M(Y,{key:0,href:s.route("panel.user.referrals.show",{referral:t.referral_id}),class:"text-primary-500 hover:underline"},{default:l(()=>[c(" Referral #"+m(t.referral_id),1)]),_:2},1032,["href"])):(a(),i("span",Je,"Referral ID Missing"))]),_:2},1024),o(y,null,{default:l(()=>[c("Created: "+m(p.formatDate(t.created_at)||"N/A"),1)]),_:2},1024),t.reduction_requests&&t.reduction_requests.length>0?(a(),i("div",Ye,[o(B,{size:6,class:"font-medium"},{default:l(()=>[c("Reduction Requests")]),_:1}),(a(!0),i(b,null,V(t.reduction_requests,n=>(a(),i("div",{key:n.id,class:"mt-3 p-4 bg-gray-50 rounded-lg border"},[e("div",Xe,[e("div",null,[e("div",Ge,[e("span",Ke,"Request #"+m(n.id),1),e("span",{class:w([p.getStatusBadgeClass(n.referral_status),"text-xs px-2 py-1 rounded-full"])},m(p.getStatusText(n.referral_status)),3)]),e("div",Qe,[e("div",null,[We,e("span",Ze,"$"+m(n.amount),1)]),e("div",null,[qe,e("span",$e,m(p.formatDate(n.created_at)),1)])])]),e("div",null,[e("div",et,[tt,e("span",{class:w([p.getDoctorDecisionBadgeClass(n.doctor_decision),"text-xs px-2 py-1 rounded-full"])},m(p.getDoctorDecisionText(n.doctor_decision)),3)]),e("div",st,[n.counter_offer?(a(),i("div",ot,[lt,e("span",at,"$"+m(n.counter_offer),1)])):f("",!0),n.notes?(a(),i("div",it,[rt,e("span",nt,m(n.notes),1)])):f("",!0)])])]),n.file_path?(a(),i("div",dt,[e("div",ct,[ut,e("a",{href:n.file_link,target:"_blank",class:"text-blue-600 hover:text-blue-800 text-sm"}," View Supporting Document ",8,mt)])])):f("",!0),d.userRole==="Doctor"&&n.doctor_decision==="pending"?(a(),i("div",_t,[pt,e("form",{onSubmit:$(g=>p.submitDecision(n),["prevent"]),class:"space-y-3"},[e("div",null,[ht,e("div",gt,[e("label",yt,[k(e("input",{type:"radio","onUpdate:modelValue":g=>n.decision=g,value:"accepted",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,vt),[[z,n.decision]]),xt]),e("label",bt,[k(e("input",{type:"radio","onUpdate:modelValue":g=>n.decision=g,value:"rejected",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,wt),[[z,n.decision]]),kt])])]),n.decision==="rejected"?(a(),i("div",Ct,[Dt,e("div",Ft,[Vt,k(e("input",{type:"number","onUpdate:modelValue":g=>n.counter_offer=g,step:"0.01",min:"0",class:"pl-7 block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"0.00"},null,8,At),[[R,n.counter_offer]])])])):f("",!0),e("div",null,[Tt,k(e("textarea",{"onUpdate:modelValue":g=>n.notes=g,rows:"2",class:"block w-full border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Add any notes or comments..."},null,8,St),[[R,n.notes]])]),e("div",Mt,[e("button",{type:"submit",disabled:!n.decision||n.processing,class:"px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[n.processing?(a(),i("span",Bt,"Processing...")):(a(),i("span",Nt,"Submit Decision"))],8,Rt)])],40,ft)])):f("",!0)]))),128))])):f("",!0),e("div",Pt,[o(v,{onClick:n=>p.markReferralComplete(t.referral_id),class:"bg-green-500 text-white flex-1"},{default:l(()=>[c(" Complete ")]),_:2},1032,["onClick"]),d.userRole==="Attorney"||d.userRole==="Case_manager"?(a(),M(v,{key:0,onClick:n=>p.openReductionModal(t.referral_id),disabled:t.reduction_requests&&t.reduction_requests.length>0,class:w(["bg-orange-500 text-white flex-1",{"opacity-50 cursor-not-allowed":t.reduction_requests&&t.reduction_requests.length>0}])},{default:l(()=>[c(" Reduction ")]),_:2},1032,["onClick","disabled","class"])):f("",!0),o(v,{onClick:n=>p.markReferralLost(t.referral_id),class:"bg-red-500 text-white flex-1"},{default:l(()=>[c(" Lost ")]),_:2},1032,["onClick"])])])]))),128))])]),_:1})])):f("",!0),_.activeTab==="cms"?(a(),i("div",It,[o(F,null,{default:l(()=>[o(D,null,{title:l(()=>[Ut]),_:1}),e("div",jt,[o(X,{src:"https://docuseal.com/d/Dwz83PcPdAY9Ry",onSubmit:p.handleFormSubmit,onSave:p.handleFormSave},null,8,["src","onSubmit","onSave"])]),e("div",Ot,[o(v,{onClick:p.saveFormForLater,color:"secondary",class:"flex-1"},{default:l(()=>[c(" Save for Later ")]),_:1},8,["onClick"]),o(v,{onClick:p.downloadFormPDF,color:"primary",class:"flex-1"},{default:l(()=>[c(" Download PDF ")]),_:1},8,["onClick"])])]),_:1})])):f("",!0),_.activeTab==="reduction-requests"?(a(),i("div",Lt,[o(F,null,{default:l(()=>[o(D,null,{title:l(()=>[Et]),_:1}),e("div",zt,[d.reductionRequests.length===0?(a(),i("div",Ht,Gt)):(a(),i("div",Kt,[(a(!0),i(b,null,V(d.reductionRequests,t=>{var n,g,E;return a(),i("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm"},[e("div",Qt,[e("div",null,[e("h4",Wt," Reduction Request #"+m(t.id),1),e("p",Zt," Referral #"+m((n=t.referral)==null?void 0:n.referral_id)+" - "+m((E=(g=t.referral)==null?void 0:g.patientUser)==null?void 0:E.name),1)]),e("div",qt,[e("span",{class:w(p.getStatusBadgeClass(t.referral_status))},m(p.getStatusText(t.referral_status)),3),e("span",{class:w(p.getDoctorDecisionBadgeClass(t.doctor_decision))},m(p.getDoctorDecisionText(t.doctor_decision)),3)])]),e("div",$t,[e("div",null,[es,e("p",ts,"$"+m(t.amount),1)]),t.counter_offer?(a(),i("div",ss,[os,e("p",ls,"$"+m(t.counter_offer),1)])):f("",!0)]),t.notes?(a(),i("div",as,[is,e("p",rs,m(t.notes),1)])):f("",!0),t.file_path?(a(),i("div",ns,[ds,e("a",{href:`/storage/${t.file_path}`,target:"_blank",class:"mt-1 inline-flex items-center text-primary-600 hover:text-primary-500"},[us,c(" Download File ")],8,cs)])):f("",!0),d.userRole==="Doctor"&&t.doctor_decision==="pending"?(a(),i("div",ms,[_s,e("div",ps,[e("div",null,[fs,k(e("select",{"onUpdate:modelValue":x=>t.decision=x,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"},xs,8,hs),[[ee,t.decision]])]),t.decision==="accepted"?(a(),i("div",bs,[ws,k(e("input",{type:"number","onUpdate:modelValue":x=>t.counter_offer=x,step:"0.01",min:"0",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter counter offer amount"},null,8,ks),[[R,t.counter_offer]])])):f("",!0)]),e("div",Cs,[Ds,k(e("textarea",{"onUpdate:modelValue":x=>t.notes=x,rows:"3",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",placeholder:"Add any notes about your decision"},null,8,Fs),[[R,t.notes]])]),e("div",Vs,[e("button",{onClick:x=>p.submitDecision(t),disabled:!t.decision,class:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Submit Decision ",8,As),e("button",{onClick:x=>p.resetDecisionForm(t),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400"}," Reset ",8,Ts)])])):f("",!0),(d.userRole==="Attorney"||d.userRole==="Case_manager")&&t.doctor_decision!=="pending"?(a(),i("div",Ss,[Ms,e("div",Rs,[e("p",Bs,[Ns,e("span",{class:w(p.getDoctorDecisionBadgeClass(t.doctor_decision))},m(p.getDoctorDecisionText(t.doctor_decision)),3)]),t.counter_offer?(a(),i("p",Ps,[Is,c(" $"+m(t.counter_offer),1)])):f("",!0),t.notes?(a(),i("p",Us,[js,c(" "+m(t.notes),1)])):f("",!0)])])):f("",!0)])}),128))]))])]),_:1})])):f("",!0),_.activeTab==="billing"?(a(),i("div",Os,[o(F,null,{default:l(()=>[e("div",Ls,[o(D,null,{title:l(()=>[Es]),_:1}),e("div",zs,[d.userRole==="Doctor"?(a(),i("div",Hs,[o(T,null,{default:l(()=>[o(A,null,{default:l(()=>[c("Billing Type")]),_:1}),o(I,{modelValue:_.billingType,"onUpdate:modelValue":u[0]||(u[0]=t=>_.billingType=t),options:[{label:"Insurance",value:"Insurance"},{label:"LOP (Letter of Protection)",value:"LOP"}],error:_.form.errors.billing_type,disabled:_.form.processing,class:"w-full"},null,8,["modelValue","options","error","disabled"]),e("p",Js,[_.billingType==="Insurance"?(a(),i("span",Ys," Insurance billing will not deduct from policy limit. ")):_.billingType==="LOP"?(a(),i("span",Xs," LOP billing will deduct from policy limit. ")):f("",!0)])]),_:1})])):f("",!0),d.userRole==="Doctor"?(a(),i("div",Gs,[o(T,null,{default:l(()=>[o(A,{class:"mb-2"},{default:l(()=>[c("CPT Codes")]),_:1}),_.form.cptCodes.length===0?(a(),i("div",Ks," No CPT codes added yet. ")):(a(),i("div",Qs,[(a(!0),i(b,null,V(_.form.cptCodes,(t,n)=>(a(),i("div",{key:n,class:"flex gap-4 items-start"},[o(I,{options:d.allCptCodes.map(g=>({label:`${g.code} - ${g.description}`,value:g.id})),modelValue:t.code,"onUpdate:modelValue":g=>t.code=g,error:_.form.errors[`cptCodes.${n}.code`],disabled:_.form.processing,class:"flex-1"},null,8,["options","modelValue","onUpdate:modelValue","error","disabled"]),o(N,{type:"number",modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,error:_.form.errors[`cptCodes.${n}.value`],disabled:_.form.processing,placeholder:"Amount",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue","error","disabled"]),o(v,{onClick:g=>p.removeCptCode(n),color:"red",class:"self-start"},{default:l(()=>[c(" Remove ")]),_:2},1032,["onClick"])]))),128))])),o(v,{onClick:p.addCptCode,color:"primary",class:"mt-4"},{default:l(()=>[c(" Add CPT Code ")]),_:1},8,["onClick"])]),_:1})])):f("",!0),d.userRole==="Doctor"?(a(),i("div",Ws,[o(v,{onClick:p.saveCase,color:"primary",disabled:_.form.processing,class:"w-full sm:w-auto"},{default:l(()=>[c(" Save Billing Information ")]),_:1},8,["onClick","disabled"])])):(a(),i("div",Zs,[e("div",qs,[$s,e("p",eo,m(d.caseDetails.billing_type||"N/A"),1)]),e("div",to,[so,_.form.cptCodes.length===0?(a(),i("div",oo," No CPT codes added yet. ")):(a(),i("div",lo,[(a(!0),i(b,null,V(_.form.cptCodes,(t,n)=>(a(),i("div",{key:n,class:"flex justify-between items-center"},[e("span",ao,m(p.getCptCodeDescription(t.code)),1),e("span",io,"$"+m(t.value),1)]))),128))]))])]))])])]),_:1})])):f("",!0)])]),o(Z,{modelValue:_.isModalOpen,"onUpdate:modelValue":u[3]||(u[3]=t=>_.isModalOpen=t),persistent:"","max-width":"500px"},{default:l(()=>[o(P,null,{default:l(()=>[o(G,null,{default:l(()=>[ro]),_:1}),o(Q,null,{default:l(()=>[o(K,{modelValue:_.isFormValid,"onUpdate:modelValue":u[2]||(u[2]=t=>_.isFormValid=t),ref:"reductionForm"},{default:l(()=>[o(T,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:l(()=>[o(A,null,{default:l(()=>[no]),_:1}),o(N,{type:"number",modelValue:_.reductionAmount,"onUpdate:modelValue":u[1]||(u[1]=t=>_.reductionAmount=t),step:"0.01",min:"0",class:"border border-gray-300 rounded-lg",required:""},null,8,["modelValue"]),_.reductionAmount?f("",!0):(a(),M(U,{key:0},{default:l(()=>[c("Amount is required")]),_:1}))]),_:1}),o(T,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:l(()=>[o(A,null,{default:l(()=>[co]),_:1}),o(N,{type:"file",onChange:p.handleFileChange,accept:".pdf,.doc,.docx",class:"border border-gray-300 rounded-lg",required:""},null,8,["onChange"]),_.reductionFile?(a(),i("div",uo," Selected: "+m(p.selectedFileName),1)):f("",!0),_.reductionFile?f("",!0):(a(),M(U,{key:1},{default:l(()=>[c("File is required")]),_:1})),mo]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(W,null,{default:l(()=>[o(j,{text:"",onClick:p.closeReductionModal},{default:l(()=>[c("Cancel")]),_:1},8,["onClick"]),o(j,{color:"orange",disabled:!_.isFormValid,onClick:p.submitReduction},{default:l(()=>[c("Submit")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const vo=le(ae,[["render",_o],["__scopeId","data-v-30629193"]]);export{vo as default};
