import{L as Y}from"./index-C99Ts5PX.js";import{j as T,r as p,o as i,c,a as s,g as e,F as b,i as D,w as o,f as h,t as m,b as r,n as R,e as w,p as G,k as K}from"./app-BXgbEd8A.js";import{d as Q}from"./index.esm-DBdvevlm.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_user-menu-ENtOGCbS.js";const Z={layout:Y,components:{DocusealForm:Q},props:{caseDetails:{type:Object,required:!0},referrals:{type:Array,required:!0},userRole:{type:String,required:!0},userId:{type:Number,required:!0},allCptCodes:{type:Array,required:!0}},data(){return{tabs:[{name:"patient",label:"Patient Information"},{name:"attorney",label:"Attorney Information"},{name:"policy",label:"Policy Limit Information"},{name:"referrals",label:"Referrals"},{name:"cms",label:"CMS 1500 Form"},{name:"billing",label:"Billing Information"}],activeTab:"patient",formData:null,savedFormId:null,billingType:this.caseDetails.billing_type||"Insurance",form:{cptCodes:[],processing:!1},isModalOpen:!1,reductionAmount:null,reductionFile:null,isFormValid:!0,selectedReferralId:null}},created(){if(this.caseDetails.cpt_codes)try{this.form.cptCodes=JSON.parse(this.caseDetails.cpt_codes)}catch(a){console.error("Error parsing CPT codes:",a),this.form.cptCodes=[]}},watch:{reductionAmount(a){this.validateForm()},reductionFile(a){this.validateForm()}},computed:{calculateRemainingPolicyLimit(){var n;const a=parseFloat(((n=this.caseDetails.policy_limit_info)==null?void 0:n.policy_limit)||0),l=this.calculateTotalBilledAmount;return(a-l).toFixed(2)},calculateTotalBilledAmount(){return this.form.cptCodes?this.form.cptCodes.reduce((a,l)=>a+(parseFloat(l.value)||0),0).toFixed(2):"0.00"},selectedFileName(){return this.reductionFile?this.reductionFile.name:"No file selected"}},methods:{formatDate(a){if(!a)return"N/A";const l=new Date(a);return isNaN(l)?"Invalid Date":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(l)},getStatusBadgeClass(a){switch(a){case"pending":return"bg-yellow-500 text-white px-2 py-1 rounded text-sm";case"reduction_request_sent":return"bg-blue-500 text-white px-2 py-1 rounded text-sm";case"accepted":return"bg-green-500 text-white px-2 py-1 rounded text-sm";case"rejected":return"bg-red-500 text-white px-2 py-1 rounded text-sm";default:return"bg-gray-500 text-white px-2 py-1 rounded text-sm"}},getStatusText(a){switch(a){case"pending":return"Pending";case"reduction_request_sent":return"Reduction Request Sent";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return"Unknown"}},getDoctorDecisionBadgeClass(a){switch(a){case"pending":return"bg-yellow-500 text-white px-2 py-1 mb-2 rounded text-sm";case"accepted":return"bg-green-500 text-white px-2 py-1 mb-2 rounded text-sm";case"rejected":return"bg-red-500 text-white px-2 py-1 mb-2 rounded text-sm";default:return"bg-gray-500 text-white px-2 py-1 mb-2 rounded text-sm"}},getDoctorDecisionText(a){switch(a){case"pending":return"Pending";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return"Unknown"}},markReferralComplete(a){this.$toast().success(`Referral #${a} marked as complete!`)},markReferralLost(a){this.$toast().info(`Referral #${a} marked as lost.`)},openReductionModal(a){this.selectedReferralId=a,this.isModalOpen=!0},closeReductionModal(){this.isModalOpen=!1,this.reductionAmount=null,this.reductionFile=null,this.selectedReferralId=null,this.isFormValid=!0},validateForm(){this.isFormValid=!!(this.reductionAmount&&this.reductionFile&&this.selectedReferralId)},handleFileChange(a){const l=a.target.files[0];if(l){if(l.size>2*1024*1024){this.$toast().error("File size must be less than 2MB"),a.target.value="",this.reductionFile=null;return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(l.type)){this.$toast().error("Please select a valid file type (PDF, DOC, or DOCX)"),a.target.value="",this.reductionFile=null;return}this.reductionFile=l}},async submitReduction(){if(!this.reductionAmount||!this.reductionFile||!this.selectedReferralId){this.$toast().error("Please fill in all required fields");return}if(this.reductionAmount<=0){this.$toast().error("Reduction amount must be greater than 0");return}if(this.isFormValid&&this.selectedReferralId){const a=new FormData;a.append("case_id",this.caseDetails.case_id),a.append("referral_id",this.selectedReferralId),a.append("amount",this.reductionAmount),a.append("referral_status","reduction_request_sent"),this.reductionFile&&a.append("file",this.reductionFile);try{const l=await T.post("/reduction-requests",a,{headers:{"Content-Type":"multipart/form-data"}});this.$toast().info("Reduction request sent successfully."),this.closeReductionModal(),this.$inertia.reload()}catch(l){this.$toast().error("Error sending reduction request."),console.error("Error:",l.response.data)}}},async handleFormSubmit(a){this.formData=a,await this.saveFormToDatabase(a,"completed")},async handleFormSave(a){this.formData=a,await this.saveFormToDatabase(a,"draft")},async saveFormToDatabase(a,l){try{const n=await T.post(route("panel.user.cases.saveForm",{case:this.caseDetails.case_id}),{form_data:a,status:l});n.data.success&&(this.savedFormId=n.data.form_id,this.$toast().success("Form saved successfully!"))}catch(n){this.$toast().error("Error saving form"),console.error("Error saving form:",n)}},async saveFormForLater(){this.formData?await this.saveFormToDatabase(this.formData,"draft"):this.$toast().warning("No form data to save")},async downloadFormPDF(){if(!this.savedFormId){this.$toast().warning("Please save the form first");return}try{const a=await T.get(route("panel.user.cases.downloadForm",{case:this.caseDetails.case_id,form:this.savedFormId}),{responseType:"blob"}),l=new Blob([a.data],{type:"application/pdf"}),n=window.URL.createObjectURL(l),x=document.createElement("a");x.href=n,x.download=`CMS-1500-Form-${this.caseDetails.case_id}.pdf`,document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(n),this.$toast().success("Form downloaded successfully!")}catch(a){this.$toast().error("Error downloading form"),console.error("Error downloading form:",a)}},addCptCode(){this.form.cptCodes.push({code:"",value:""})},removeCptCode(a){this.form.cptCodes.splice(a,1)},getCptCodeDescription(a){const l=this.allCptCodes.find(n=>n.id===a);return l?`${l.code} - ${l.description}`:"Unknown CPT Code"},async saveCase(){if(this.userRole!=="Doctor"){this.$toast().error("Only doctors can update billing information.");return}const a={billing_type:this.billingType,cpt_codes:JSON.stringify(this.form.cptCodes),is_cms1500_generated:!0};try{const l=await T.post(route("panel.user.cases.updateBilling",{case:this.caseDetails.case_id}),a,{headers:{"Content-Type":"application/json"}});this.$toast().success("Billing information updated successfully."),this.$inertia.reload()}catch(l){this.$toast().error("Error updating billing information."),console.error("Error:",l.response?l.response.data:l.message)}}}},g=a=>(G("data-v-f28a3a1b"),a=a(),K(),a),$={class:"h-full space-y-6"},ee={class:"bg-dark shadow-sm rounded-lg p-6 pb-8"},te=g(()=>e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Case View",-1)),se={class:"flex space-x-4 border-b pb-3"},oe=["onClick"],ae={class:"bg-white shadow-sm rounded-lg p-6"},re={key:0},le=g(()=>e("div",{class:"flex items-center gap-2 text-xl font-semibold text-gray-700"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"Patient Information")],-1)),ie={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-6"},ne={class:"flex items-center gap-3"},de={class:"flex items-center gap-3"},ce=g(()=>e("svg",{class:"w-5 h-5 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M16 12H8m8 0a4 4 0 00-8 0m8 0a4 4 0 01-8 0m8 0V9a3 3 0 00-6 0v3m6 0a3 3 0 11-6 0"})],-1)),ue={class:"flex items-start gap-3 col-span-2"},me=g(()=>e("svg",{class:"w-5 h-5 text-gray-600 mt-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 2C8.134 2 5 5.134 5 9c0 4.656 7 11 7 11s7-6.344 7-11c0-3.866-3.134-7-7-7zM12 11a2 2 0 110-4 2 2 0 010 4z"})],-1)),_e={key:1,class:"bg-white shadow-md rounded-lg p-6"},pe=g(()=>e("div",{class:"flex items-center gap-2 border-b pb-3 mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("h2",{class:"text-lg font-semibold text-gray-700"},"Attorney Information")],-1)),fe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},he={class:"text-base font-medium text-gray-800"},ge={class:"flex flex-col gap-2 text-gray-600"},ye={class:"text-sm"},ve=g(()=>e("span",{class:"font-medium text-gray-700"},"Email:",-1)),xe={key:2},be={class:"bg-white rounded-lg shadow-md p-6"},we=g(()=>e("div",{class:"flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"Policy Limit"),r(" Information ")],-1)),Ce={class:"mt-6"},ke={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},De={class:"flex flex-col gap-3"},Fe={class:"bg-gray-50 p-4 rounded-lg"},Ae={class:"bg-gray-50 p-4 rounded-lg"},Te={class:"bg-gray-50 p-4 rounded-lg"},Re={class:"flex flex-col gap-3"},Ie={class:"bg-gray-50 p-4 rounded-lg"},Ve={class:"bg-gray-50 p-4 rounded-lg"},Pe={class:"bg-gray-50 p-4 rounded-lg"},Ne={key:3},Me=g(()=>e("div",{class:"flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"Referrals")],-1)),Se={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"},Be={class:"flex flex-col gap-2"},Le={key:1,class:"text-gray-500"},je={key:0,class:"mt-4"},Oe=["href"],Ue={class:"flex gap-2 mt-2"},qe={key:4},Ee=g(()=>e("div",{class:"flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"CMS 1500 Form")],-1)),ze={class:"mt-4"},He={class:"mt-6 flex gap-4"},Je={key:5},Xe={class:"bg-white rounded-lg shadow-md p-6"},Ye=g(()=>e("div",{class:"flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),e("span",{class:"text-primary-500"},"Billing Information")],-1)),Ge={class:"mt-4"},Ke={key:0,class:"mb-6"},Qe={class:"mt-2 text-sm text-gray-600"},We={key:0},Ze={key:1},$e={key:1,class:"mt-6"},et={key:0,class:"text-gray-500 mb-4"},tt={key:1,class:"space-y-4"},st={key:2,class:"mt-6"},ot={key:3,class:"space-y-4"},at={class:"bg-gray-50 p-4 rounded-lg"},rt=g(()=>e("p",{class:"text-sm text-gray-600"},"Billing Type",-1)),lt={class:"font-medium text-gray-800"},it={class:"bg-gray-50 p-4 rounded-lg"},nt=g(()=>e("p",{class:"text-sm text-gray-600"},"CPT Codes",-1)),dt={key:0,class:"text-gray-500"},ct={key:1,class:"space-y-2"},ut={class:"font-medium text-gray-800"},mt={class:"text-gray-600"},_t=g(()=>e("span",{class:"headline"},"Send for Reduction",-1)),pt=g(()=>e("span",{class:"text-dark-500 italic"},"Amount for Reduction",-1)),ft=g(()=>e("span",{class:"text-dark-500 italic"},"Upload Supporting File",-1)),ht={key:0,class:"mt-2 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700"},gt=g(()=>e("p",{class:"mt-1 text-xs text-gray-500"},"Accepted formats: PDF, DOC, DOCX (max 2MB)",-1));function yt(a,l,n,x,d,f){var B,L;const j=p("v-inertia-head"),C=p("v-section-heading"),O=p("v-avatar"),I=p("v-heading"),_=p("v-paragraph"),k=p("v-content-body"),P=p("v-card"),U=p("v-link"),y=p("v-button"),q=p("DocusealForm"),F=p("v-form-label"),N=p("v-form-select"),A=p("v-form-group"),V=p("v-form-input"),E=p("v-card-title"),M=p("v-form-error"),z=p("v-form"),H=p("v-card-text"),S=p("v-btn"),J=p("v-card-actions"),X=p("v-dialog");return i(),c(b,null,[s(j,{title:"Case Details"}),e("div",$,[e("div",ee,[te,e("nav",se,[(i(!0),c(b,null,D(d.tabs,t=>(i(),c("button",{key:t.name,onClick:u=>d.activeTab=t.name,class:R(["px-4 py-2 rounded-md text-sm font-medium focus:outline-none border",d.activeTab===t.name?"bg-primary-500 text-white border-primary-500 shadow-md":"text-gray-600 border-gray-300 hover:bg-gray-100"])},m(t.label),11,oe))),128))])]),e("div",ae,[d.activeTab==="patient"?(i(),c("div",re,[s(P,{class:"p-6 shadow-lg rounded-lg border border-gray-200"},{default:o(()=>[s(k,null,{default:o(()=>[s(C,null,{title:o(()=>[le]),_:1}),e("div",ie,[e("div",ne,[s(O,{size:"40",class:"bg-primary-100 text-primary-600"},{default:o(()=>{var t,u;return[r(m(((u=(t=n.caseDetails.patient)==null?void 0:t.name)==null?void 0:u.charAt(0))||"N"),1)]}),_:1}),e("div",null,[s(I,{size:5,class:"font-semibold text-gray-800"},{default:o(()=>{var t;return[r(m(((t=n.caseDetails.patient)==null?void 0:t.name)||"N/A"),1)]}),_:1}),s(_,{class:"text-gray-500 text-sm"},{default:o(()=>[r(" Patient Name ")]),_:1})])]),e("div",de,[ce,e("div",null,[s(_,{class:"text-gray-800 font-medium"},{default:o(()=>{var t;return[r(m(((t=n.caseDetails.patient)==null?void 0:t.email)||"N/A"),1)]}),_:1}),s(_,{class:"text-gray-500 text-sm"},{default:o(()=>[r(" Email ")]),_:1})])]),e("div",ue,[me,e("div",null,[s(_,{class:"text-gray-800 font-medium"},{default:o(()=>{var t,u;return[r(m(((t=n.caseDetails.patient)==null?void 0:t.address_line_1)||"N/A")+", "+m(((u=n.caseDetails.patient)==null?void 0:u.address_line_2)||"N/A"),1)]}),_:1}),s(_,{class:"text-gray-500 text-sm"},{default:o(()=>[r(" Address ")]),_:1})])])])]),_:1})]),_:1})])):h("",!0),d.activeTab==="attorney"?(i(),c("div",_e,[pe,e("div",fe,[e("div",null,[e("h3",he,m(((B=n.caseDetails.attorney)==null?void 0:B.name)||"N/A"),1)]),e("div",ge,[e("p",ye,[ve,r(" "+m(((L=n.caseDetails.attorney)==null?void 0:L.email)||"N/A"),1)])])])])):h("",!0),d.activeTab==="policy"?(i(),c("div",xe,[s(k,null,{default:o(()=>[e("div",be,[s(C,null,{title:o(()=>[we]),_:1}),e("div",Ce,[e("div",ke,[e("div",De,[e("div",Fe,[s(_,{class:"text-sm text-gray-600"},{default:o(()=>[r(" Policy Limit: ")]),_:1}),s(_,{class:"font-medium text-gray-800"},{default:o(()=>{var t;return[r(m(((t=n.caseDetails.policy_limit_info)==null?void 0:t.policy_limit)||"N/A"),1)]}),_:1})]),e("div",Ae,[s(_,{class:"text-sm text-gray-600"},{default:o(()=>[r(" PIP: ")]),_:1}),s(_,{class:"font-medium text-gray-800"},{default:o(()=>{var t;return[r(m(((t=n.caseDetails.policy_limit_info)==null?void 0:t.pip)||"N/A"),1)]}),_:1})]),e("div",Te,[s(_,{class:"text-sm text-gray-600"},{default:o(()=>[r(" Defendant Insurance: ")]),_:1}),s(_,{class:"font-medium text-gray-800"},{default:o(()=>{var t;return[r(m(((t=n.caseDetails.policy_limit_info)==null?void 0:t.defendant_insurance)||"N/A"),1)]}),_:1})])]),e("div",Re,[e("div",Ie,[s(_,{class:"text-sm text-gray-600"},{default:o(()=>[r(" Plaintiff Insurance: ")]),_:1}),s(_,{class:"font-medium text-gray-800"},{default:o(()=>{var t;return[r(m(((t=n.caseDetails.policy_limit_info)==null?void 0:t.plaintiff_insurance)||"N/A"),1)]}),_:1})]),e("div",Ve,[s(_,{class:"text-sm text-gray-600"},{default:o(()=>[r(" Commercial Case: ")]),_:1}),s(_,{class:"font-medium text-gray-800"},{default:o(()=>{var t;return[r(m((t=n.caseDetails.policy_limit_info)!=null&&t.commercial_case?"Yes":"No"),1)]}),_:1})]),e("div",Pe,[s(_,{class:"text-sm text-gray-600"},{default:o(()=>[r(" Type of Accident: ")]),_:1}),s(_,{class:"font-medium text-gray-800"},{default:o(()=>{var t;return[r(m(((t=n.caseDetails.policy_limit_info)==null?void 0:t.type_of_accident)||"N/A"),1)]}),_:1})])])])])])]),_:1})])):h("",!0),d.activeTab==="referrals"?(i(),c("div",Ne,[s(k,null,{default:o(()=>[s(C,null,{title:o(()=>[Me]),_:1}),e("div",Se,[(i(!0),c(b,null,D(n.referrals,t=>(i(),c("div",{key:t.referral_id,class:"bg-gray-50 p-4 rounded-lg shadow-sm"},[e("div",Be,[s(I,{size:6,class:"font-medium"},{default:o(()=>[t.referral_id?(i(),w(U,{key:0,href:a.route("panel.user.referrals.show",{referral:t.referral_id}),class:"text-primary-500 hover:underline"},{default:o(()=>[r(" Referral #"+m(t.referral_id),1)]),_:2},1032,["href"])):(i(),c("span",Le,"Referral ID Missing"))]),_:2},1024),s(_,null,{default:o(()=>[r("Created: "+m(f.formatDate(t.created_at)||"N/A"),1)]),_:2},1024),t.reduction_requests&&t.reduction_requests.length>0?(i(),c("div",je,[s(I,{size:6,class:"font-medium"},{default:o(()=>[r("Reduction Requests")]),_:1}),(i(!0),c(b,null,D(t.reduction_requests,u=>(i(),c("div",{key:u.id,class:"mt-2"},[s(_,null,{default:o(()=>[r("Amount: $"+m(u.amount),1)]),_:2},1024),s(_,{class:"mt-2"},{default:o(()=>[r(" Status: "),e("span",{class:R(f.getStatusBadgeClass(u.referral_status))},m(f.getStatusText(u.referral_status)),3)]),_:2},1024),s(_,{class:"mt-4"},{default:o(()=>[r(" Doctor Decision: "),e("span",{class:R(f.getDoctorDecisionBadgeClass(u.doctor_decision))},m(f.getDoctorDecisionText(u.doctor_decision)),3)]),_:2},1024),u.counter_offer?(i(),w(_,{key:0},{default:o(()=>[r(" Counter Offer: $"+m(u.counter_offer),1)]),_:2},1024)):h("",!0),u.file_path?(i(),w(_,{key:1},{default:o(()=>[e("a",{href:u.file_link,target:"_blank",class:"text-primary-500 hover:underline"},"Download File",8,Oe)]),_:2},1024)):h("",!0)]))),128))])):h("",!0),e("div",Ue,[s(y,{onClick:u=>f.markReferralComplete(t.referral_id),class:"bg-green-500 text-white flex-1"},{default:o(()=>[r(" Complete ")]),_:2},1032,["onClick"]),n.userRole==="Attorney"||n.userRole==="Case_manager"?(i(),w(y,{key:0,onClick:u=>f.openReductionModal(t.referral_id),disabled:t.reduction_requests&&t.reduction_requests.length>0,class:R(["bg-orange-500 text-white flex-1",{"opacity-50 cursor-not-allowed":t.reduction_requests&&t.reduction_requests.length>0}])},{default:o(()=>[r(" Reduction ")]),_:2},1032,["onClick","disabled","class"])):h("",!0),s(y,{onClick:u=>f.markReferralLost(t.referral_id),class:"bg-red-500 text-white flex-1"},{default:o(()=>[r(" Lost ")]),_:2},1032,["onClick"])])])]))),128))])]),_:1})])):h("",!0),d.activeTab==="cms"?(i(),c("div",qe,[s(k,null,{default:o(()=>[s(C,null,{title:o(()=>[Ee]),_:1}),e("div",ze,[s(q,{src:"https://docuseal.com/d/Dwz83PcPdAY9Ry",onSubmit:f.handleFormSubmit,onSave:f.handleFormSave},null,8,["src","onSubmit","onSave"])]),e("div",He,[s(y,{onClick:f.saveFormForLater,color:"secondary",class:"flex-1"},{default:o(()=>[r(" Save for Later ")]),_:1},8,["onClick"]),s(y,{onClick:f.downloadFormPDF,color:"primary",class:"flex-1"},{default:o(()=>[r(" Download PDF ")]),_:1},8,["onClick"])])]),_:1})])):h("",!0),d.activeTab==="billing"?(i(),c("div",Je,[s(k,null,{default:o(()=>[e("div",Xe,[s(C,null,{title:o(()=>[Ye]),_:1}),e("div",Ge,[n.userRole==="Doctor"?(i(),c("div",Ke,[s(A,null,{default:o(()=>[s(F,null,{default:o(()=>[r("Billing Type")]),_:1}),s(N,{modelValue:d.billingType,"onUpdate:modelValue":l[0]||(l[0]=t=>d.billingType=t),options:[{label:"Insurance",value:"Insurance"},{label:"LOP (Letter of Protection)",value:"LOP"}],error:d.form.errors.billing_type,disabled:d.form.processing,class:"w-full"},null,8,["modelValue","options","error","disabled"]),e("p",Qe,[d.billingType==="Insurance"?(i(),c("span",We," Insurance billing will not deduct from policy limit. ")):d.billingType==="LOP"?(i(),c("span",Ze," LOP billing will deduct from policy limit. ")):h("",!0)])]),_:1})])):h("",!0),n.userRole==="Doctor"?(i(),c("div",$e,[s(A,null,{default:o(()=>[s(F,{class:"mb-2"},{default:o(()=>[r("CPT Codes")]),_:1}),d.form.cptCodes.length===0?(i(),c("div",et," No CPT codes added yet. ")):(i(),c("div",tt,[(i(!0),c(b,null,D(d.form.cptCodes,(t,u)=>(i(),c("div",{key:u,class:"flex gap-4 items-start"},[s(N,{options:n.allCptCodes.map(v=>({label:`${v.code} - ${v.description}`,value:v.id})),modelValue:t.code,"onUpdate:modelValue":v=>t.code=v,error:d.form.errors[`cptCodes.${u}.code`],disabled:d.form.processing,class:"flex-1"},null,8,["options","modelValue","onUpdate:modelValue","error","disabled"]),s(V,{type:"number",modelValue:t.value,"onUpdate:modelValue":v=>t.value=v,error:d.form.errors[`cptCodes.${u}.value`],disabled:d.form.processing,placeholder:"Amount",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue","error","disabled"]),s(y,{onClick:v=>f.removeCptCode(u),color:"red",class:"self-start"},{default:o(()=>[r(" Remove ")]),_:2},1032,["onClick"])]))),128))])),s(y,{onClick:f.addCptCode,color:"primary",class:"mt-4"},{default:o(()=>[r(" Add CPT Code ")]),_:1},8,["onClick"])]),_:1})])):h("",!0),n.userRole==="Doctor"?(i(),c("div",st,[s(y,{onClick:f.saveCase,color:"primary",disabled:d.form.processing,class:"w-full sm:w-auto"},{default:o(()=>[r(" Save Billing Information ")]),_:1},8,["onClick","disabled"])])):(i(),c("div",ot,[e("div",at,[rt,e("p",lt,m(n.caseDetails.billing_type||"N/A"),1)]),e("div",it,[nt,d.form.cptCodes.length===0?(i(),c("div",dt," No CPT codes added yet. ")):(i(),c("div",ct,[(i(!0),c(b,null,D(d.form.cptCodes,(t,u)=>(i(),c("div",{key:u,class:"flex justify-between items-center"},[e("span",ut,m(f.getCptCodeDescription(t.code)),1),e("span",mt,"$"+m(t.value),1)]))),128))]))])]))])])]),_:1})])):h("",!0)])]),s(X,{modelValue:d.isModalOpen,"onUpdate:modelValue":l[3]||(l[3]=t=>d.isModalOpen=t),persistent:"","max-width":"500px"},{default:o(()=>[s(P,null,{default:o(()=>[s(E,null,{default:o(()=>[_t]),_:1}),s(H,null,{default:o(()=>[s(z,{modelValue:d.isFormValid,"onUpdate:modelValue":l[2]||(l[2]=t=>d.isFormValid=t),ref:"reductionForm"},{default:o(()=>[s(A,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:o(()=>[s(F,null,{default:o(()=>[pt]),_:1}),s(V,{type:"number",modelValue:d.reductionAmount,"onUpdate:modelValue":l[1]||(l[1]=t=>d.reductionAmount=t),step:"0.01",min:"0",class:"border border-gray-300 rounded-lg",required:""},null,8,["modelValue"]),d.reductionAmount?h("",!0):(i(),w(M,{key:0},{default:o(()=>[r("Amount is required")]),_:1}))]),_:1}),s(A,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:o(()=>[s(F,null,{default:o(()=>[ft]),_:1}),s(V,{type:"file",onChange:f.handleFileChange,accept:".pdf,.doc,.docx",class:"border border-gray-300 rounded-lg",required:""},null,8,["onChange"]),d.reductionFile?(i(),c("div",ht," Selected: "+m(f.selectedFileName),1)):h("",!0),d.reductionFile?h("",!0):(i(),w(M,{key:1},{default:o(()=>[r("File is required")]),_:1})),gt]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(J,null,{default:o(()=>[s(S,{text:"",onClick:f.closeReductionModal},{default:o(()=>[r("Cancel")]),_:1},8,["onClick"]),s(S,{color:"orange",disabled:!d.isFormValid,onClick:f.submitReduction},{default:o(()=>[r("Submit")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const kt=W(Z,[["render",yt],["__scopeId","data-v-f28a3a1b"]]);export{kt as default};
