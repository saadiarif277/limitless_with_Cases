import{L as T}from"./index-BkP0jPDe.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as d,o as _,c as p,a as s,g as l,w as t,F as y,b as o,t as i,i as C,e as k,n as b,f as D,p as U,j as z}from"./app-Bi_K_mTy.js";import"./_user-menu-BSju8n0v.js";const O={layout:T,props:{caseDetails:{type:Object,required:!0},icdCodeDescription:{type:String,required:!0},cptCodeDescriptions:{type:Array,required:!0},referrals:{type:Array,required:!0}},data(){return{isModalOpen:!1,reductionAmount:null,reductionFile:null,isFormValid:!0,selectedReferralId:null}},methods:{downloadCMS1500Form(){},markReferralComplete(n){this.$toast().success(`Referral #${n} marked as complete!`)},markReferralLost(n){this.$toast().info(`Referral #${n} marked as lost.`)},openReductionModal(n){this.selectedReferralId=n,this.isModalOpen=!0},closeReductionModal(){this.isModalOpen=!1,this.reductionAmount=null,this.reductionFile=null,this.selectedReferralId=null},async submitReduction(){if(this.isFormValid&&this.selectedReferralId){const n=new FormData;n.append("case_id",this.caseDetails.case_id),n.append("referral_id",this.selectedReferralId),n.append("amount",this.reductionAmount),n.append("referral_status","reduction_request_sent"),this.reductionFile&&n.append("file",this.reductionFile);try{const u=await axios.post("/reduction-requests",n,{headers:{"Content-Type":"multipart/form-data"}});this.$toast().info("Reduction request sent successfully."),this.closeReductionModal(),this.$inertia.reload()}catch(u){this.$toast().error("Error sending reduction request."),console.error("Error:",u.response.data)}}},formatDate(n){if(!n)return"N/A";const u=new Date(n);return isNaN(u)?"Invalid Date":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(u)},getStatusBadgeClass(n){switch(n){case"pending":return"bg-yellow-500 text-white px-2 py-1 rounded text-sm";case"reduction_request_sent":return"bg-blue-500 text-white px-2 py-1 rounded text-sm";case"accepted":return"bg-green-500 text-white px-2 py-1 rounded text-sm";case"rejected":return"bg-red-500 text-white px-2 py-1 rounded text-sm";default:return"bg-gray-500 text-white px-2 py-1 rounded text-sm"}},getStatusText(n){switch(n){case"pending":return"Pending";case"reduction_request_sent":return"Reduction Request Sent";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return"Unknown"}},getDoctorDecisionBadgeClass(n){switch(n){case"pending":return"bg-yellow-500 text-white px-2 py-1 mb-2 rounded text-sm";case"accepted":return"bg-green-500 text-white px-2 py-1  mb-2  rounded text-sm";case"rejected":return"bg-red-500 text-white px-2 py-1  mb-2  rounded text-sm";default:return"bg-gray-500 text-white px-2 py-1  mb-2  rounded text-sm"}},getDoctorDecisionText(n){switch(n){case"pending":return"Pending";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return"Unknown"}}}},g=n=>(U("data-v-3a24e705"),n=n(),z(),n),H={class:"h-full space-y-6"},E={class:"bg-white shadow-sm rounded-lg p-6"},Y=g(()=>l("div",{class:"flex items-center gap-2"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),l("span",{class:"text-primary-500"},"Patient"),o(" Information ")],-1)),G={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4"},J={class:"flex flex-col gap-1"},K={class:"bg-white shadow-sm rounded-lg p-6"},Q=g(()=>l("div",{class:"flex items-center gap-2"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),l("span",{class:"text-primary-500"},"Attorney"),o(" Information ")],-1)),W={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4"},X={class:"flex flex-col gap-1"},Z={class:"bg-white shadow-sm rounded-lg p-6"},$=g(()=>l("div",{class:"flex items-center gap-2"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),l("span",{class:"text-primary-500"},"Billing"),o(" Information ")],-1)),ee={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4"},te={class:"flex flex-col gap-1"},se={key:0},le={class:"list-disc pl-5"},oe={class:"bg-white shadow-sm rounded-lg p-6"},ne=g(()=>l("div",{class:"flex items-center gap-2"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),l("span",{class:"text-primary-500"},"Policy Limit"),o(" Information ")],-1)),ie={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4"},ae={class:"flex flex-col gap-1"},re={class:"bg-white shadow-sm rounded-lg p-6"},de=g(()=>l("div",{class:"flex items-center gap-2"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),l("span",{class:"text-primary-500"},"Referrals")],-1)),ce={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"},ue={class:"flex flex-col gap-2"},_e={key:1,class:"text-gray-500"},me={key:0,class:"mt-4"},pe=["href"],fe={class:"flex gap-2 mt-2"},ge={class:"bg-white shadow-sm rounded-lg p-6"},he=g(()=>l("div",{class:"flex items-center gap-2"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),l("span",{class:"text-primary-500"},"CMS 1500 Form")],-1)),ve={class:"mt-4"},xe=g(()=>l("span",{class:"headline"},"Send for Reduction",-1)),we=g(()=>l("span",{class:"text-dark-500 italic"},"Amount for Reduction",-1)),ye=g(()=>l("span",{class:"text-dark-500 italic"},"Upload Supporting File",-1));function ke(n,u,r,Ce,f,m){const R=d("v-inertia-head"),h=d("v-section-heading"),v=d("v-heading"),a=d("v-paragraph"),x=d("v-content-body"),V=d("v-link"),w=d("v-button"),I=d("v-card-title"),A=d("v-form-label"),M=d("v-form-input"),N=d("v-form-group"),B=d("v-form"),S=d("v-card-text"),F=d("v-btn"),j=d("v-card-actions"),q=d("v-card"),P=d("v-dialog");return _(),p(y,null,[s(R,{title:"Case Details"}),l("div",H,[l("div",E,[s(x,null,{default:t(()=>[s(h,null,{title:t(()=>[Y]),_:1}),l("div",G,[l("div",null,[s(v,{size:6,class:"font-medium"},{default:t(()=>{var e;return[o(i(((e=r.caseDetails.patient)==null?void 0:e.name)||"N/A"),1)]}),_:1})]),l("div",J,[s(a,null,{default:t(()=>{var e;return[o("Email: "+i(((e=r.caseDetails.patient)==null?void 0:e.email)||"N/A"),1)]}),_:1}),s(a,null,{default:t(()=>{var e,c;return[o("Address: "+i(((e=r.caseDetails.patient)==null?void 0:e.address_line_1)||"N/A")+", "+i(((c=r.caseDetails.patient)==null?void 0:c.address_line_2)||"N/A"),1)]}),_:1})])])]),_:1})]),l("div",K,[s(x,null,{default:t(()=>[s(h,null,{title:t(()=>[Q]),_:1}),l("div",W,[l("div",null,[s(v,{size:6,class:"font-medium"},{default:t(()=>{var e;return[o(i(((e=r.caseDetails.attorney)==null?void 0:e.name)||"N/A"),1)]}),_:1})]),l("div",X,[s(a,null,{default:t(()=>{var e;return[o("Email: "+i(((e=r.caseDetails.attorney)==null?void 0:e.email)||"N/A"),1)]}),_:1})])])]),_:1})]),l("div",Z,[s(x,null,{default:t(()=>[s(h,null,{title:t(()=>[$]),_:1}),l("div",ee,[l("div",null,[s(v,{size:6,class:"font-medium"},{default:t(()=>[o("Billing Details")]),_:1})]),l("div",te,[s(a,null,{default:t(()=>[o("Billing Type: "+i(r.caseDetails.billing_type||"N/A"),1)]),_:1}),s(a,null,{default:t(()=>[o("ICD-10 Code: "+i(r.icdCodeDescription||"N/A"),1)]),_:1}),s(a,null,{default:t(()=>[o("Service Billed: "+i(r.caseDetails.service_billed||"N/A"),1)]),_:1}),r.cptCodeDescriptions.length?(_(),p("div",se,[s(a,null,{default:t(()=>[o("CPT Codes:")]),_:1}),l("ul",le,[(_(!0),p(y,null,C(r.cptCodeDescriptions,e=>(_(),p("li",{key:e},i(e),1))),128))])])):(_(),k(a,{key:1},{default:t(()=>[o("CPT Codes: N/A")]),_:1}))])])]),_:1})]),l("div",oe,[s(x,null,{default:t(()=>[s(h,null,{title:t(()=>[ne]),_:1}),l("div",ie,[l("div",null,[s(v,{size:6,class:"font-medium"},{default:t(()=>[o("Policy Details")]),_:1})]),l("div",ae,[s(a,null,{default:t(()=>{var e;return[o("Policy Limit: "+i(((e=r.caseDetails.policy_limit_info)==null?void 0:e.policy_limit)||"N/A"),1)]}),_:1}),s(a,null,{default:t(()=>{var e;return[o("PIP: "+i(((e=r.caseDetails.policy_limit_info)==null?void 0:e.pip)||"N/A"),1)]}),_:1}),s(a,null,{default:t(()=>{var e;return[o("Defendant Insurance: "+i(((e=r.caseDetails.policy_limit_info)==null?void 0:e.defendant_insurance)||"N/A"),1)]}),_:1}),s(a,null,{default:t(()=>{var e;return[o("Plaintiff Insurance: "+i(((e=r.caseDetails.policy_limit_info)==null?void 0:e.plaintiff_insurance)||"N/A"),1)]}),_:1}),s(a,null,{default:t(()=>{var e;return[o("Commercial Case: "+i((e=r.caseDetails.policy_limit_info)!=null&&e.commercial_case?"Yes":"No"),1)]}),_:1}),s(a,null,{default:t(()=>{var e;return[o("Type of Accident: "+i(((e=r.caseDetails.policy_limit_info)==null?void 0:e.type_of_accident)||"N/A"),1)]}),_:1})])])]),_:1})]),l("div",re,[s(x,null,{default:t(()=>[s(h,null,{title:t(()=>[de]),_:1}),l("div",ce,[(_(!0),p(y,null,C(r.referrals,e=>(_(),p("div",{key:e.referral_id,class:"bg-gray-50 p-4 rounded-lg shadow-sm"},[l("div",ue,[s(v,{size:6,class:"font-medium"},{default:t(()=>[e.referral_id?(_(),k(V,{key:0,href:n.route("panel.admin.referrals.show",{referral:e.referral_id}),class:"text-primary-500 hover:underline"},{default:t(()=>[o(" Referral #"+i(e.referral_id),1)]),_:2},1032,["href"])):(_(),p("span",_e,"Referral ID Missing"))]),_:2},1024),s(a,null,{default:t(()=>[o("Created: "+i(m.formatDate(e.created_at)||"N/A"),1)]),_:2},1024),e.reduction_requests&&e.reduction_requests.length>0?(_(),p("div",me,[s(v,{size:6,class:"font-medium"},{default:t(()=>[o("Reduction Requests")]),_:1}),(_(!0),p(y,null,C(e.reduction_requests,c=>(_(),p("div",{key:c.id,class:"mt-2"},[s(a,null,{default:t(()=>[o("Amount: $"+i(c.amount),1)]),_:2},1024),s(a,{class:"mt-2"},{default:t(()=>[o(" Status: "),l("span",{class:b(m.getStatusBadgeClass(c.referral_status))},i(m.getStatusText(c.referral_status)),3)]),_:2},1024),s(a,{class:"mt-4"},{default:t(()=>[o(" Doctor Decision: "),l("span",{class:b(m.getDoctorDecisionBadgeClass(c.doctor_decision))},i(m.getDoctorDecisionText(c.doctor_decision)),3)]),_:2},1024),c.counter_offer?(_(),k(a,{key:0},{default:t(()=>[o(" Counter Offer: $"+i(c.counter_offer),1)]),_:2},1024)):D("",!0),c.file_path?(_(),k(a,{key:1},{default:t(()=>[l("a",{href:c.file_link,target:"_blank",class:"text-primary-500 hover:underline"},"Download File",8,pe)]),_:2},1024)):D("",!0)]))),128))])):D("",!0),l("div",fe,[s(w,{onClick:c=>m.markReferralComplete(e.referral_id),class:"bg-green-500 text-white flex-1"},{default:t(()=>[o(" Complete ")]),_:2},1032,["onClick"]),s(w,{onClick:c=>m.openReductionModal(e.referral_id),disabled:e.reduction_requests&&e.reduction_requests.length>0,class:b(["bg-orange-500 text-white flex-1",{"opacity-50 cursor-not-allowed":e.reduction_requests&&e.reduction_requests.length>0}])},{default:t(()=>[o(" Reduction ")]),_:2},1032,["onClick","disabled","class"]),s(w,{onClick:c=>m.markReferralLost(e.referral_id),class:"bg-red-500 text-white flex-1"},{default:t(()=>[o(" Lost ")]),_:2},1032,["onClick"])])])]))),128))])]),_:1})]),l("div",ge,[s(x,null,{default:t(()=>[s(h,null,{title:t(()=>[he]),_:1}),l("div",ve,[s(w,{onClick:m.downloadCMS1500Form,color:"primary"},{default:t(()=>[o(" Download CMS 1500 Form ")]),_:1},8,["onClick"])])]),_:1})])]),s(P,{modelValue:f.isModalOpen,"onUpdate:modelValue":u[3]||(u[3]=e=>f.isModalOpen=e),persistent:"","max-width":"500px"},{default:t(()=>[s(q,null,{default:t(()=>[s(I,null,{default:t(()=>[xe]),_:1}),s(S,null,{default:t(()=>[s(B,{modelValue:f.isFormValid,"onUpdate:modelValue":u[2]||(u[2]=e=>f.isFormValid=e),ref:"reductionForm"},{default:t(()=>[s(N,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:t(()=>[s(A,null,{default:t(()=>[we]),_:1}),s(M,{type:"number",modelValue:f.reductionAmount,"onUpdate:modelValue":u[0]||(u[0]=e=>f.reductionAmount=e),class:"border border-gray-300 rounded-lg",required:""},null,8,["modelValue"])]),_:1}),s(N,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:t(()=>[s(A,null,{default:t(()=>[ye]),_:1}),s(M,{type:"file",modelValue:f.reductionFile,"onUpdate:modelValue":u[1]||(u[1]=e=>f.reductionFile=e),class:"border border-gray-300 rounded-lg",required:""},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(j,null,{default:t(()=>[s(F,{text:"",onClick:m.closeReductionModal},{default:t(()=>[o("Cancel")]),_:1},8,["onClick"]),s(F,{color:"orange",disabled:!f.isFormValid,onClick:m.submitReduction},{default:t(()=>[o("Submit")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const Ne=L(O,[["render",ke],["__scopeId","data-v-3a24e705"]]);export{Ne as default};
