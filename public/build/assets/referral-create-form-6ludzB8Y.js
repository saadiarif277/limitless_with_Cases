import{R as U,a as D,b as F}from"./_referral-patient-form-B3P9vrd-.js";import{R as A}from"./_referral-documents-form-BTWeyc69.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as a,o as i,c as x,a as r,w as o,e as _,b as n,t as d,f as c,g as p,T,F as B,i as M,d as L}from"./app-DsmlTcIo.js";const N={props:{items:{type:Array,default:()=>[]}},data(){return{form:{policy_limit:"",pip:"",defendant_insurance:"",plaintiff_insurance:"",commercial_case:!1,type_of_accident:"",errors:{},processing:!1},typeOfAccidentOptions:[{label:"Motor Vehicle Accident",value:"motor_vehicle"},{label:"Workplace Accident",value:"workplace"},{label:"Medical Malpractice",value:"medical_malpractice"},{label:"Slip and Fall",value:"slip_and_fall"}]}},methods:{filterItems(){this.items.filter(u=>u.someCondition)},updateParent(){this.$emit("update:insuranceData",{...this.form})},submitForm(){this.form.processing=!0,setTimeout(()=>{this.form.processing=!1,alert("Form submitted!")},2e3)}}},z={class:"divide-y divide-gray-200"},E=p("div",{class:"flex items-center gap-2"},[p("div",{class:"flex items-center gap-2"},[p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-primary-500"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})]),p("span",{class:"text-dark-500"},"Insurance"),n(" Information ")])],-1),H=p("span",{class:"text-dark-500 italic"},"Policy Limit",-1),W=p("span",{class:"text-dark-500 italic"},"PIP",-1),Y=p("span",{class:"text-dark-500 italic"},"Defendant Insurance",-1),G=p("span",{class:"text-dark-500 italic"},"Plaintiff Insurance",-1),J=p("span",{class:"text-dark-500 italic"},"Type of Accident",-1);function K(u,s,t,S,e,b){const v=a("v-section-heading"),V=a("v-content-body"),m=a("v-form-label"),y=a("v-form-input"),g=a("v-form-error"),C=a("v-form-group"),k=a("v-form-select");return i(),x("div",z,[r(V,null,{default:o(()=>[r(v,null,{title:o(()=>[E]),_:1})]),_:1}),r(V,{class:"relative grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-6 gap-4"},{default:o(()=>[r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:o(()=>[r(m,null,{default:o(()=>[H]),_:1}),r(y,{type:"number",modelValue:e.form.policy_limit,"onUpdate:modelValue":s[0]||(s[0]=f=>e.form.policy_limit=f),error:e.form.errors.policy_limit,onInput:b.updateParent,class:"border border-gray-300 rounded-lg"},null,8,["modelValue","error","onInput"]),e.form.errors.policy_limit?(i(),_(g,{key:0},{default:o(()=>[n(d(e.form.errors.policy_limit),1)]),_:1})):c("",!0)]),_:1}),r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:o(()=>[r(m,null,{default:o(()=>[W]),_:1}),r(y,{type:"number",modelValue:e.form.pip,"onUpdate:modelValue":s[1]||(s[1]=f=>e.form.pip=f),error:e.form.errors.pip,onInput:b.updateParent,class:"border border-gray-300 rounded-lg"},null,8,["modelValue","error","onInput"]),e.form.errors.pip?(i(),_(g,{key:0},{default:o(()=>[n(d(e.form.errors.pip),1)]),_:1})):c("",!0)]),_:1}),r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:o(()=>[r(m,null,{default:o(()=>[Y]),_:1}),r(y,{type:"text",modelValue:e.form.defendant_insurance,"onUpdate:modelValue":s[2]||(s[2]=f=>e.form.defendant_insurance=f),error:e.form.errors.defendant_insurance,onInput:b.updateParent,class:"border border-gray-300 rounded-lg"},null,8,["modelValue","error","onInput"]),e.form.errors.defendant_insurance?(i(),_(g,{key:0},{default:o(()=>[n(d(e.form.errors.defendant_insurance),1)]),_:1})):c("",!0)]),_:1}),r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:o(()=>[r(m,null,{default:o(()=>[G]),_:1}),r(y,{type:"text",modelValue:e.form.plaintiff_insurance,"onUpdate:modelValue":s[3]||(s[3]=f=>e.form.plaintiff_insurance=f),error:e.form.errors.plaintiff_insurance,onInput:b.updateParent,class:"border border-gray-300 rounded-lg"},null,8,["modelValue","error","onInput"]),e.form.errors.plaintiff_insurance?(i(),_(g,{key:0},{default:o(()=>[n(d(e.form.errors.plaintiff_insurance),1)]),_:1})):c("",!0)]),_:1}),r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:o(()=>[r(m,null,{default:o(()=>[n("Is it a Commercial Case?")]),_:1}),r(k,{options:[{label:"Yes",value:!0},{label:"No",value:!1}],error:e.form.errors.commercial_case,disabled:e.form.processing,required:!0,modelValue:e.form.commercial_case,"onUpdate:modelValue":s[4]||(s[4]=f=>e.form.commercial_case=f)},null,8,["error","disabled","modelValue"]),e.form.errors.commercial_case?(i(),_(g,{key:0},{default:o(()=>[n(d(e.form.errors.commercial_case),1)]),_:1})):c("",!0)]),_:1}),r(C,{class:"col-span-full sm:col-span-2 xl:col-span-3"},{default:o(()=>[r(m,null,{default:o(()=>[J]),_:1}),r(k,{options:e.typeOfAccidentOptions,modelValue:e.form.type_of_accident,"onUpdate:modelValue":s[5]||(s[5]=f=>e.form.type_of_accident=f),error:e.form.errors.type_of_accident,onChange:b.updateParent,class:"border border-gray-300 rounded-lg"},null,8,["options","modelValue","error","onChange"]),e.form.errors.type_of_accident?(i(),_(g,{key:0},{default:o(()=>[n(d(e.form.errors.type_of_accident),1)]),_:1})):c("",!0)]),_:1})]),_:1})])}const Q=I(N,[["render",K]]),X={name:"ReferralsCreateForm",components:{"x-referral-attorney-form":U,"x-referral-doctor-form":D,"x-referral-documents-form":A,"x-referral-patient-form":F,"x-policy-form":Q},props:{attorneys:{type:Object,required:!0},doctors:{type:Object,required:!0},physicians:{type:Object,required:!0},documentCategories:{type:Object,required:!1},medicalSpecialties:{type:Object,required:!0},patients:{type:Object,required:!0},referralReasons:{type:Object,required:!1},referralStatuses:{type:Object,required:!1},referralStates:{type:Object,required:!1},states:{type:Object,required:!1},listRoute:{type:String,default:"panel.admin.referrals.index"},storeRoute:{type:String,default:"panel.admin.referrals.store"},icdCodes:{type:Object,required:!1},CptCodes:{type:Object,required:!1}},data(){return{form:T({referral_date:new Date().toISOString().split("T")[0],referral_status_id:1,state_id:this.$page.props.auth.user.state_id||"",attorney:{name:"",email:"",phone_number:"",law_firm:{name:"",email:"",phone_number:"",address_line_1:"",address_line_2:"",city:"",state_id:"",zip_code:""}},doctor:{user_id:"",name:"",email:"",phone_number:"",clinic:{clinic_id:"",name:"",email:"",phone_number:"",address_line_1:"",address_line_2:"",city:"",state_id:"",zip_code:""},notes:""},patient:{name:"",email:"",phone_number:"",height:"",weight:"",gender:"",birthdate:"",injury_date:"",address_line_1:"",address_line_2:"",city:"",state_id:"",zip_code:"",referral_reason_ids:[]},documents:{},selectedCptCodes:[],insuranceData:{},billing_type:"",is_cms1500_generated:!1,case_won:!1,outcome:"",reduction_accepted:!1,is_closed:!1,closed_at:null,created_at:null,updated_at:null})}},methods:{handleInsuranceData(u){this.form.insuranceData=u},handleCloseChange(){this.form.is_closed?this.form.closed_at=new Date().toISOString():this.form.closed_at=null},submitForm(){this.form.post(this.route(this.storeRoute),{onSuccess:()=>this.$toast().success("Referral created successfully!"),onError:u=>{Object.keys(u).forEach(s=>{this.$toast().error(u[s])})}})},getCptLabel(u){var t;const s=(((t=this.CptCodes)==null?void 0:t.data)??[]).find(S=>S.id===u);return s?`${s.code} - ${s.description}`:"Unknown"},removeCptCode(u){this.form.selectedCptCodes=this.form.selectedCptCodes.filter(s=>s!==u)}}},Z={class:"h-full divide-y divide-gray-200 space-y-12"},$={key:0,class:"selected-codes"},ee=["onClick"],re=["value"];function te(u,s,t,S,e,b){const v=a("v-form-label"),V=a("v-form-input"),m=a("v-form-error"),y=a("v-form-group"),g=a("v-form-select"),C=a("v-content-body"),k=a("x-policy-form"),f=a("x-referral-doctor-form"),O=a("x-referral-patient-form"),q=a("x-referral-attorney-form"),w=a("x-referral-documents-form"),R=a("v-button"),j=a("v-form");return i(),_(j,{class:"h-full",onSubmit:L(b.submitForm,["prevent"])},{default:o(()=>[p("div",Z,[p("div",null,[r(C,{class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6"},{default:o(()=>[r(y,null,{default:o(()=>[r(v,null,{default:o(()=>[n("Referral Date")]),_:1}),r(V,{type:"date",modelValue:e.form.referral_date,"onUpdate:modelValue":s[0]||(s[0]=l=>e.form.referral_date=l),error:e.form.errors.referral_date,disabled:e.form.processing},null,8,["modelValue","error","disabled"]),e.form.errors.referral_date?(i(),_(m,{key:0},{default:o(()=>[n(d(e.form.errors.referral_date),1)]),_:1})):c("",!0)]),_:1}),r(y,null,{default:o(()=>[r(v,null,{default:o(()=>[n("Referral Status")]),_:1}),r(g,{options:t.referralStatuses.data.map(l=>({label:l.name,value:l.referral_status_id})),error:e.form.errors.referral_status_id,disabled:e.form.processing,required:!0,modelValue:e.form.referral_status_id,"onUpdate:modelValue":s[1]||(s[1]=l=>e.form.referral_status_id=l)},null,8,["options","error","disabled","modelValue"]),e.form.errors.referral_status_id?(i(),_(m,{key:0},{default:o(()=>[n(d(e.form.errors.referral_status_id),1)]),_:1})):c("",!0)]),_:1}),r(y,null,{default:o(()=>[r(v,null,{default:o(()=>[n("Referral State")]),_:1}),r(g,{options:(t.referralStates||t.states).data.map(l=>({label:l.name,value:l.state_id})),error:e.form.errors.state_id,disabled:e.form.processing,required:!0,modelValue:e.form.state_id,"onUpdate:modelValue":s[2]||(s[2]=l=>e.form.state_id=l)},null,8,["options","error","disabled","modelValue"]),e.form.errors.state_id?(i(),_(m,{key:0},{default:o(()=>[n(d(e.form.errors.state_id),1)]),_:1})):c("",!0)]),_:1}),r(y,null,{default:o(()=>{var l;return[r(v,null,{default:o(()=>[n("CPT Codes")]),_:1}),r(g,{options:(((l=t.CptCodes)==null?void 0:l.data)??[]).map(h=>({label:h.code+" - "+h.description,value:h.id})),error:e.form.errors.cpt_code_id,disabled:e.form.processing,required:!0,multiple:"",modelValue:e.form.selectedCptCodes,"onUpdate:modelValue":s[3]||(s[3]=h=>e.form.selectedCptCodes=h)},null,8,["options","error","disabled","modelValue"]),e.form.selectedCptCodes.length?(i(),x("div",$,[(i(!0),x(B,null,M(e.form.selectedCptCodes,(h,P)=>(i(),x("span",{key:P,class:"badge"},[n(d(b.getCptLabel(h))+" ",1),p("button",{type:"button",onClick:oe=>b.removeCptCode(h),class:"remove-btn"},"Ã—",8,ee)]))),128))])):c("",!0),e.form.errors.cpt_code_id?(i(),_(m,{key:1},{default:o(()=>[n(d(e.form.errors.cpt_code_id),1)]),_:1})):c("",!0)]}),_:1}),r(y,null,{default:o(()=>[r(v,null,{default:o(()=>[n("Piloting Physician")]),_:1}),r(g,{options:(t.physicians||t.physicians).data.map(l=>({label:l.name,value:l.user_id})),error:e.form.errors.doctor_user_id,disabled:e.form.processing,required:!0,modelValue:e.form.doctor_user_id,"onUpdate:modelValue":s[4]||(s[4]=l=>e.form.doctor_user_id=l)},null,8,["options","error","disabled","modelValue"]),e.form.errors.doctor_user_id?(i(),_(m,{key:0},{default:o(()=>[n(d(e.form.errors.doctor_user_id),1)]),_:1})):c("",!0)]),_:1}),r(y,null,{default:o(()=>[r(v,null,{default:o(()=>[n("Billing Type")]),_:1}),r(g,{options:["LOP","Insurance"].map(l=>({label:l,value:l})),error:e.form.errors.billing_type,disabled:e.form.processing,required:!0,modelValue:e.form.billing_type,"onUpdate:modelValue":s[5]||(s[5]=l=>e.form.billing_type=l)},null,8,["options","error","disabled","modelValue"]),e.form.errors.billing_type?(i(),_(m,{key:0},{default:o(()=>[n(d(e.form.errors.billing_type),1)]),_:1})):c("",!0)]),_:1})]),_:1})]),r(k,{"onUpdate:insuranceData":b.handleInsuranceData},null,8,["onUpdate:insuranceData"]),r(f,{attorneys:t.attorneys,doctors:t.doctors,"document-categories":t.documentCategories,form:e.form,"medical-specialties":t.medicalSpecialties,patients:t.patients,"referral-reasons":t.referralReasons,"referral-statuses":t.referralStatuses,states:t.states},null,8,["attorneys","doctors","document-categories","form","medical-specialties","patients","referral-reasons","referral-statuses","states"]),r(O,{attorneys:t.attorneys,doctors:t.doctors,"document-categories":t.documentCategories,form:e.form,"medical-specialties":t.medicalSpecialties,patients:t.patients,"referral-reasons":t.referralReasons,"referral-statuses":t.referralStatuses,states:t.states,icdCodes:t.icdCodes},null,8,["attorneys","doctors","document-categories","form","medical-specialties","patients","referral-reasons","referral-statuses","states","icdCodes"]),r(q,{attorneys:t.attorneys,doctors:t.doctors,"document-categories":t.documentCategories,form:e.form,"medical-specialties":t.medicalSpecialties,patients:t.patients,"referral-reasons":t.referralReasons,"referral-statuses":t.referralStatuses,states:t.states},null,8,["attorneys","doctors","document-categories","form","medical-specialties","patients","referral-reasons","referral-statuses","states"]),r(w,{attorneys:t.attorneys,doctors:t.doctors,"document-categories":t.documentCategories,form:e.form,"medical-specialties":t.medicalSpecialties,patients:t.patients,"referral-reasons":t.referralReasons,"referral-statuses":t.referralStatuses,states:t.states},null,8,["attorneys","doctors","document-categories","form","medical-specialties","patients","referral-reasons","referral-statuses","states"]),r(y,{class:"col-span-full flex items-center justify-end gap-2 text-right border-t border-gray-200 bg-gray-50 px-6 py-4"},{default:o(()=>[e.form.progress?(i(),x("progress",{key:0,value:e.form.progress.percentage,max:"100"},d(e.form.progress.percentage)+"% ",9,re)):c("",!0),r(R,{href:u.route(t.listRoute),color:"white",disabled:e.form.processing},{default:o(()=>[n(" Cancel ")]),_:1},8,["href","disabled"]),r(R,{disabled:e.form.processing},{default:o(()=>[n(" Create Referral ")]),_:1},8,["disabled"])]),_:1})])]),_:1},8,["onSubmit"])}const ie=I(X,[["render",te],["__scopeId","data-v-91bba3a1"]]);export{ie as R};
